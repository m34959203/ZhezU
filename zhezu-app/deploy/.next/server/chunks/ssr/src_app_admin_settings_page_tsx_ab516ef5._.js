module.exports=[87487,a=>{"use strict";var b=a.i(52237),c=a.i(28306),d=a.i(81366),e=a.i(86487),f=a.i(3880),g=a.i(52978),h=a.i(22701),i=a.i(72227),j=a.i(32777),k=a.i(73510),l=a.i(34887),m=a.i(73965),n=a.i(63508),o=a.i(8209),p=a.i(18270);let q=(0,a.i(53659).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var r=a.i(61965);let s={siteName:"Жезказганский университет им. О.А. Байконурова",contactEmail:"info@zhezu.edu.kz",contactPhone:"+7 7102 123456",address:{kk:"",ru:"",en:""},socialLinks:{instagram:"",telegram:"",youtube:"",facebook:""},admissionOpen:!0,maintenanceMode:!1,announcement:{kk:"",ru:"",en:""}},t=[{code:"ru",label:"RU"},{code:"kk",label:"KK"},{code:"en",label:"EN"}],u=[{value:"gemini-2.5-flash",label:"Gemini 2.5 Flash (рекомендуется)"},{value:"gemini-2.5-flash-lite",label:"Gemini 2.5 Flash Lite (быстрее/дешевле)"},{value:"gemini-2.5-pro",label:"Gemini 2.5 Pro (умнее)"},{value:"gemini-2.0-flash",label:"Gemini 2.0 Flash (устаревшая)"}];function v(){let[a,v]=(0,c.useState)(s),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(!0),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)("ru"),[G,H]=(0,c.useState)({}),[I,J]=(0,c.useState)({}),[K,L]=(0,c.useState)({});async function M(){B(!0),D(!1);try{if((await fetch("/api/admin/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok){D(!0),v(a=>({...a,integrations:{...a.integrations,geminiApiKey:void 0,telegramBotToken:void 0,instagramAccessToken:void 0}}));let a=await fetch("/api/admin/settings");if(a.ok){let b=await a.json();b.integrationsStatus&&x(b.integrationsStatus)}setTimeout(()=>D(!1),2e3)}}finally{B(!1)}}(0,c.useEffect)(()=>{let a=new AbortController;return fetch("/api/admin/settings",{signal:a.signal}).then(a=>a.ok?a.json():s).then(a=>{a.integrationsStatus&&x(a.integrationsStatus),v(a)}).catch(()=>{}).finally(()=>z(!1)),()=>a.abort()},[]);let N=(0,c.useCallback)(async a=>{J(b=>({...b,[a]:!0})),L(b=>({...b,[a]:void 0}));try{let b=await fetch("/api/admin/ai/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:a})}),c=await b.json();L(b=>({...b,[a]:c}))}catch{L(b=>({...b,[a]:{ok:!1,message:"Ошибка подключения"}}))}finally{J(b=>({...b,[a]:!1}))}},[]);if(y)return(0,b.jsx)("div",{className:"flex items-center justify-center py-32",children:(0,b.jsx)(e.Loader2,{size:24,className:"animate-spin text-blue-500"})});let O="w-full rounded-lg border border-slate-200 bg-white px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none dark:border-slate-700 dark:bg-slate-800 dark:text-white",P="flex-1 rounded-lg border border-slate-200 bg-white px-4 py-2.5 font-mono text-sm focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 focus:outline-none dark:border-slate-700 dark:bg-slate-800 dark:text-white";function Q({isSet:a}){return(0,b.jsx)("span",{className:`inline-block h-2 w-2 rounded-full ${a?"bg-green-500":"bg-slate-300 dark:bg-slate-600"}`,title:a?"Настроено":"Не задано"})}function R({result:a}){return a?(0,b.jsxs)("span",{className:`flex items-center gap-1 text-xs font-medium ${a.ok?"text-green-600 dark:text-green-400":"text-red-500"}`,children:[a.ok?(0,b.jsx)(p.CheckCircle2,{size:12}):(0,b.jsx)(q,{size:12}),a.message]}):null}function S({enabled:a,onChange:c}){return(0,b.jsx)("button",{type:"button",onClick:()=>c(!a),className:`relative h-6 w-11 rounded-full transition-colors ${a?"bg-blue-600":"bg-slate-300 dark:bg-slate-600"}`,children:(0,b.jsx)("span",{className:`absolute top-0.5 left-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform ${a?"translate-x-5":""}`})})}return(0,b.jsxs)("div",{className:"mx-auto max-w-3xl space-y-6",children:[(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)("button",{type:"button",onClick:M,disabled:A,className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2.5 text-sm font-semibold text-white transition-colors hover:bg-blue-700 disabled:opacity-50",children:[A?(0,b.jsx)(e.Loader2,{size:14,className:"animate-spin"}):(0,b.jsx)(d.Save,{size:14}),C?"Сохранено!":"Сохранить настройки"]})}),(0,b.jsxs)("section",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[(0,b.jsxs)("h3",{className:"mb-4 flex items-center gap-2 font-bold text-slate-900 dark:text-white",children:[(0,b.jsx)(f.Globe,{size:18,className:"text-blue-500"}),"Основные"]}),(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1.5 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Название сайта"}),(0,b.jsx)("input",{type:"text",value:a.siteName,onChange:a=>v(b=>({...b,siteName:a.target.value})),className:O})]})})]}),(0,b.jsxs)("section",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[(0,b.jsxs)("h3",{className:"mb-4 flex items-center gap-2 font-bold text-slate-900 dark:text-white",children:[(0,b.jsx)(g.Phone,{size:18,className:"text-emerald-500"}),"Контакты"]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"mb-1.5 flex items-center gap-1.5 text-sm font-medium text-slate-700 dark:text-slate-300",children:[(0,b.jsx)(h.Mail,{size:12})," Email"]}),(0,b.jsx)("input",{type:"email",value:a.contactEmail,onChange:a=>v(b=>({...b,contactEmail:a.target.value})),className:O})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"mb-1.5 flex items-center gap-1.5 text-sm font-medium text-slate-700 dark:text-slate-300",children:[(0,b.jsx)(g.Phone,{size:12})," Телефон"]}),(0,b.jsx)("input",{type:"text",value:a.contactPhone,onChange:a=>v(b=>({...b,contactPhone:a.target.value})),className:O})]})]}),(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsxs)("div",{className:"mb-1.5 flex items-center justify-between",children:[(0,b.jsxs)("label",{className:"flex items-center gap-1.5 text-sm font-medium text-slate-700 dark:text-slate-300",children:[(0,b.jsx)(i.MapPin,{size:12})," Адрес (",E.toUpperCase(),")"]}),(0,b.jsx)("div",{className:"flex gap-1",children:t.map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>F(a.code),className:`rounded px-2 py-0.5 text-[10px] font-bold ${E===a.code?"bg-blue-600 text-white":"text-slate-400 hover:text-slate-600 dark:hover:text-white"}`,children:a.label},a.code))})]}),(0,b.jsx)("input",{type:"text",value:a.address[E],onChange:a=>v(b=>({...b,address:{...b.address,[E]:a.target.value}})),className:O})]})]}),(0,b.jsxs)("section",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[(0,b.jsx)("h3",{className:"mb-4 font-bold text-slate-900 dark:text-white",children:"Соцсети (ссылки)"}),(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2",children:["instagram","telegram","youtube","facebook"].map(c=>(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1.5 block text-sm font-medium text-slate-700 capitalize dark:text-slate-300",children:c}),(0,b.jsx)("input",{type:"url",value:a.socialLinks[c]??"",onChange:a=>v(b=>({...b,socialLinks:{...b.socialLinks,[c]:a.target.value}})),placeholder:`https://${c}.com/...`,className:O})]},c))})]}),(0,b.jsxs)("section",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[(0,b.jsxs)("h3",{className:"mb-4 flex items-center gap-2 font-bold text-slate-900 dark:text-white",children:[(0,b.jsx)(j.Shield,{size:18,className:"text-amber-500"}),"Режимы"]}),(0,b.jsx)("div",{className:"space-y-4",children:[{key:"admissionOpen",label:"Приём документов открыт",desc:"Показывать кнопку «Подать заявку» на сайте"},{key:"maintenanceMode",label:"Режим обслуживания",desc:"Показать заглушку «Сайт на обслуживании»"}].map(c=>(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 p-4 dark:border-slate-800",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:c.label}),(0,b.jsx)("p",{className:"text-xs text-slate-400",children:c.desc})]}),(0,b.jsx)(S,{enabled:a[c.key],onChange:a=>v(b=>({...b,[c.key]:a}))})]},c.key))})]}),(0,b.jsxs)("section",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[(0,b.jsxs)("h3",{className:"mb-4 font-bold text-slate-900 dark:text-white",children:["Баннер-объявление (",E.toUpperCase(),")"]}),(0,b.jsx)("textarea",{value:a.announcement?.[E]??"",onChange:a=>v(b=>({...b,announcement:{...b.announcement||{kk:"",ru:"",en:""},[E]:a.target.value}})),rows:3,placeholder:"Текст объявления. Оставьте пустым чтобы скрыть баннер.",className:"w-full resize-none rounded-lg border border-slate-200 bg-white px-4 py-3 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none dark:border-slate-700 dark:bg-slate-800 dark:text-white"})]}),(0,b.jsxs)("section",{className:"rounded-xl border border-purple-200 bg-white p-6 dark:border-purple-500/20 dark:bg-slate-900",children:[(0,b.jsxs)("h3",{className:"mb-2 flex items-center gap-2 font-bold text-slate-900 dark:text-white",children:[(0,b.jsx)(k.Sparkles,{size:18,className:"text-purple-500"}),"Интеграции (AI и соцсети)"]}),(0,b.jsx)("p",{className:"mb-5 text-xs text-slate-400",children:"Секреты не возвращаются с сервера после сохранения. Введите новый токен, чтобы обновить."}),(0,b.jsxs)("div",{className:"space-y-5",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-green-100 bg-green-50/50 p-4 dark:border-green-500/20 dark:bg-green-500/5",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"flex items-center gap-1.5 text-sm font-semibold text-green-700 dark:text-green-400",children:[(0,b.jsx)(r.Zap,{size:14}),"Автопубликация в соцсети"]}),(0,b.jsx)("p",{className:"mt-0.5 text-xs text-slate-500 dark:text-slate-400",children:"Автоматически публиковать новости в Telegram и Instagram при переводе из черновика в опубликованное"})]}),(0,b.jsx)(S,{enabled:a.integrations?.autoPublishSocial??w?.autoPublishSocial??!1,onChange:a=>v(b=>({...b,integrations:{...b.integrations,autoPublishSocial:a}}))})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-slate-100 p-4 dark:border-slate-800",children:[(0,b.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,b.jsxs)("h4",{className:"flex items-center gap-1.5 text-sm font-semibold text-purple-600 dark:text-purple-400",children:[(0,b.jsx)(k.Sparkles,{size:14}),"Google Gemini (AI)",(0,b.jsx)(Q,{isSet:!!w?.geminiApiKeySet})]}),(0,b.jsxs)("button",{type:"button",onClick:()=>N("gemini"),disabled:I.gemini||!w?.geminiApiKeySet,className:"flex items-center gap-1 rounded-md border border-purple-200 px-2.5 py-1 text-[11px] font-medium text-purple-600 transition-colors hover:bg-purple-50 disabled:opacity-40 dark:border-purple-500/30 dark:text-purple-400 dark:hover:bg-purple-500/10",children:[I.gemini?(0,b.jsx)(e.Loader2,{size:10,className:"animate-spin"}):(0,b.jsx)(r.Zap,{size:10}),"Проверить"]})]}),(0,b.jsx)(R,{result:K.gemini}),(0,b.jsxs)("div",{className:"mt-2 grid gap-3 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"mb-1.5 block text-xs font-medium text-slate-600 dark:text-slate-400",children:["API Key ",w?.geminiApiKeySet&&"(задан)"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:G.gemini?"text":"password",value:a.integrations?.geminiApiKey??"",onChange:a=>v(b=>({...b,integrations:{...b.integrations,geminiApiKey:a.target.value}})),placeholder:w?.geminiApiKeySet?"••••••••":"AIza...",className:P}),(0,b.jsx)("button",{type:"button",onClick:()=>H(a=>({...a,gemini:!a.gemini})),className:"rounded-lg border border-slate-200 px-3 text-slate-400 hover:text-slate-600 dark:border-slate-700 dark:hover:text-white",children:G.gemini?(0,b.jsx)(o.EyeOff,{size:14}):(0,b.jsx)(n.Eye,{size:14})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1.5 block text-xs font-medium text-slate-600 dark:text-slate-400",children:"Модель"}),(0,b.jsx)("select",{value:a.integrations?.geminiModel||w?.geminiModel||"gemini-2.5-flash",onChange:a=>v(b=>({...b,integrations:{...b.integrations,geminiModel:a.target.value}})),className:O,children:u.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]})]})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-slate-100 p-4 dark:border-slate-800",children:[(0,b.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,b.jsxs)("h4",{className:"flex items-center gap-1.5 text-sm font-semibold text-blue-600 dark:text-blue-400",children:[(0,b.jsx)(l.Send,{size:14}),"Telegram",(0,b.jsx)(Q,{isSet:!!w?.telegramBotTokenSet})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>N("telegram"),disabled:I.telegram||!w?.telegramBotTokenSet,className:"flex items-center gap-1 rounded-md border border-blue-200 px-2.5 py-1 text-[11px] font-medium text-blue-600 transition-colors hover:bg-blue-50 disabled:opacity-40 dark:border-blue-500/30 dark:text-blue-400 dark:hover:bg-blue-500/10",children:[I.telegram?(0,b.jsx)(e.Loader2,{size:10,className:"animate-spin"}):(0,b.jsx)(r.Zap,{size:10}),"Проверить"]}),(0,b.jsx)(S,{enabled:a.integrations?.telegramEnabled??w?.telegramEnabled??!1,onChange:a=>v(b=>({...b,integrations:{...b.integrations,telegramEnabled:a}}))})]})]}),(0,b.jsx)(R,{result:K.telegram}),(0,b.jsxs)("div",{className:"mt-2 grid gap-3 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"mb-1.5 block text-xs font-medium text-slate-600 dark:text-slate-400",children:["Bot Token ",w?.telegramBotTokenSet&&"(задан)"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:G.telegram?"text":"password",value:a.integrations?.telegramBotToken??"",onChange:a=>v(b=>({...b,integrations:{...b.integrations,telegramBotToken:a.target.value}})),placeholder:w?.telegramBotTokenSet?"••••••••":"123456:ABC-DEF...",className:P}),(0,b.jsx)("button",{type:"button",onClick:()=>H(a=>({...a,telegram:!a.telegram})),className:"rounded-lg border border-slate-200 px-3 text-slate-400 hover:text-slate-600 dark:border-slate-700 dark:hover:text-white",children:G.telegram?(0,b.jsx)(o.EyeOff,{size:14}):(0,b.jsx)(n.Eye,{size:14})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1.5 block text-xs font-medium text-slate-600 dark:text-slate-400",children:"Chat ID / @channel"}),(0,b.jsx)("input",{type:"text",value:a.integrations?.telegramChatId??w?.telegramChatId??"",onChange:a=>v(b=>({...b,integrations:{...b.integrations,telegramChatId:a.target.value}})),placeholder:"@zhezu_news или -100...",className:O+" font-mono"})]})]})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-slate-100 p-4 dark:border-slate-800",children:[(0,b.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,b.jsxs)("h4",{className:"flex items-center gap-1.5 text-sm font-semibold text-pink-600 dark:text-pink-400",children:[(0,b.jsx)(m.Camera,{size:14}),"Instagram (Graph API)",(0,b.jsx)(Q,{isSet:!!w?.instagramAccessTokenSet})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>N("instagram"),disabled:I.instagram||!w?.instagramAccessTokenSet,className:"flex items-center gap-1 rounded-md border border-pink-200 px-2.5 py-1 text-[11px] font-medium text-pink-600 transition-colors hover:bg-pink-50 disabled:opacity-40 dark:border-pink-500/30 dark:text-pink-400 dark:hover:bg-pink-500/10",children:[I.instagram?(0,b.jsx)(e.Loader2,{size:10,className:"animate-spin"}):(0,b.jsx)(r.Zap,{size:10}),"Проверить"]}),(0,b.jsx)(S,{enabled:a.integrations?.instagramEnabled??w?.instagramEnabled??!1,onChange:a=>v(b=>({...b,integrations:{...b.integrations,instagramEnabled:a}}))})]})]}),(0,b.jsx)(R,{result:K.instagram}),(0,b.jsxs)("div",{className:"mt-2 grid gap-3 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"mb-1.5 block text-xs font-medium text-slate-600 dark:text-slate-400",children:["Access Token ",w?.instagramAccessTokenSet&&"(задан)"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:G.instagram?"text":"password",value:a.integrations?.instagramAccessToken??"",onChange:a=>v(b=>({...b,integrations:{...b.integrations,instagramAccessToken:a.target.value}})),placeholder:w?.instagramAccessTokenSet?"••••••••":"EAAx...",className:P}),(0,b.jsx)("button",{type:"button",onClick:()=>H(a=>({...a,instagram:!a.instagram})),className:"rounded-lg border border-slate-200 px-3 text-slate-400 hover:text-slate-600 dark:border-slate-700 dark:hover:text-white",children:G.instagram?(0,b.jsx)(o.EyeOff,{size:14}):(0,b.jsx)(n.Eye,{size:14})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1.5 block text-xs font-medium text-slate-600 dark:text-slate-400",children:"Business Page ID"}),(0,b.jsx)("input",{type:"text",value:a.integrations?.instagramPageId??w?.instagramPageId??"",onChange:a=>v(b=>({...b,integrations:{...b.integrations,instagramPageId:a.target.value}})),placeholder:"17841...",className:O+" font-mono"})]})]})]})]})]})]})}a.s(["default",()=>v],87487)}];

//# sourceMappingURL=src_app_admin_settings_page_tsx_ab516ef5._.js.map