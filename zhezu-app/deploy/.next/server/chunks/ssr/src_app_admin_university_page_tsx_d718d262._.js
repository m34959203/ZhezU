module.exports=[49363,a=>{"use strict";var b=a.i(52237),c=a.i(28306),d=a.i(81366),e=a.i(86487),f=a.i(59279),g=a.i(46143),h=a.i(9032),i=a.i(14855),j=a.i(51637),k=a.i(7362),l=a.i(52024),m=a.i(19447),n=a.i(49902),o=a.i(29432),p=a.i(92032);let q=[{code:"ru",label:"RU"},{code:"kk",label:"KK"},{code:"en",label:"EN"}];function r(){let[a,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)("ru"),[A,B]=(0,c.useState)({general:!0,rector:!1,stats:!1,departments:!1,programs:!1,centers:!1});(0,c.useEffect)(()=>{let a=new AbortController;return fetch("/api/admin/university",{signal:a.signal}).then(a=>a.ok?a.json():null).then(r).catch(()=>{}).finally(()=>t(!1)),()=>a.abort()},[]);let C=(0,c.useCallback)(a=>{B(b=>({...b,[a]:!b[a]}))},[]);async function D(){v(!0),x(!1);try{(await fetch("/api/admin/university",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok&&(x(!0),setTimeout(()=>x(!1),2e3))}finally{v(!1)}}if(s||!a)return(0,b.jsx)("div",{className:"flex items-center justify-center py-32",children:(0,b.jsx)(e.Loader2,{size:24,className:"animate-spin text-blue-500"})});async function E(a){let b=new FormData;b.append("file",a);try{let a=await fetch("/api/admin/upload",{method:"POST",body:b});if(!a.ok)return null;let{url:c}=await a.json();return c}catch{return null}}function F({value:a,onChange:d,label:f}){let[g,h]=(0,c.useState)(!1);async function i(a){let b=a.target.files?.[0];if(!b)return;h(!0);let c=await E(b);c&&d(c),h(!1),a.target.value=""}return(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1.5 block text-xs font-medium text-slate-600 dark:text-slate-400",children:f}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[a?(0,b.jsxs)("div",{className:"relative h-20 w-20 shrink-0 overflow-hidden rounded-lg border border-slate-200 dark:border-slate-700",children:[(0,b.jsx)("img",{src:a,alt:f,className:"h-full w-full object-cover"}),(0,b.jsx)("button",{type:"button",onClick:()=>d(""),className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-white shadow hover:bg-red-600",children:(0,b.jsx)(o.X,{size:10})})]}):(0,b.jsx)("div",{className:"flex h-20 w-20 shrink-0 items-center justify-center rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700",children:(0,b.jsx)(p.User,{size:24,className:"text-slate-300 dark:text-slate-600"})}),(0,b.jsxs)("label",{className:"flex cursor-pointer items-center gap-1.5 rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs font-medium text-slate-600 transition-colors hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700",children:[g?(0,b.jsx)(e.Loader2,{size:14,className:"animate-spin"}):(0,b.jsx)(n.Upload,{size:14}),g?"Загрузка...":"Загрузить фото",(0,b.jsx)("input",{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:i,className:"hidden"})]})]})]})}let G="w-full rounded-lg border border-slate-200 bg-white px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none dark:border-slate-700 dark:bg-slate-800 dark:text-white";function H({id:a,icon:c,title:d,color:e}){return(0,b.jsxs)("button",{type:"button",onClick:()=>C(a),className:"flex w-full items-center gap-2 text-left",children:[(0,b.jsx)("span",{className:e,children:c}),(0,b.jsx)("h3",{className:"flex-1 font-bold text-slate-900 dark:text-white",children:d}),A[a]?(0,b.jsx)(l.ChevronDown,{size:16,className:"text-slate-400"}):(0,b.jsx)(m.ChevronRight,{size:16,className:"text-slate-400"})]})}return(0,b.jsxs)("div",{className:"mx-auto max-w-4xl space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Данные университета"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Управление основными данными, кафедрами и программами"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(function(){return(0,b.jsx)("div",{className:"flex gap-1",children:q.map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>z(a.code),className:`rounded px-2 py-0.5 text-[10px] font-bold ${y===a.code?"bg-blue-600 text-white":"text-slate-400 hover:text-slate-600 dark:hover:text-white"}`,children:a.label},a.code))})},{}),(0,b.jsxs)("button",{type:"button",onClick:D,disabled:u,className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2.5 text-sm font-semibold text-white transition-colors hover:bg-blue-700 disabled:opacity-50",children:[u?(0,b.jsx)(e.Loader2,{size:14,className:"animate-spin"}):(0,b.jsx)(d.Save,{size:14}),w?"Сохранено!":"Сохранить"]})]})]}),(0,b.jsxs)("section",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[(0,b.jsx)(H,{id:"general",icon:(0,b.jsx)(i.Building2,{size:18}),title:"Основная информация",color:"text-blue-500"}),A.general&&(0,b.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"mb-1.5 block text-sm font-medium text-slate-700 dark:text-slate-300",children:["Название университета (",y.toUpperCase(),")"]}),(0,b.jsx)("input",{type:"text",value:a.name[y],onChange:b=>r({...a,name:{...a.name,[y]:b.target.value}}),className:G})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1.5 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Краткое название"}),(0,b.jsx)("input",{type:"text",value:a.shortName,onChange:b=>r({...a,shortName:b.target.value}),className:G})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1.5 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Год основания"}),(0,b.jsx)("input",{type:"number",value:a.founded,onChange:b=>r({...a,founded:Number(b.target.value)}),className:G})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1.5 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Веб-сайт"}),(0,b.jsx)("input",{type:"url",value:a.website,onChange:b=>r({...a,website:b.target.value}),className:G})]})]})]})]}),(0,b.jsxs)("section",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[(0,b.jsx)(H,{id:"rector",icon:(0,b.jsx)(f.GraduationCap,{size:18}),title:"Руководство",color:"text-purple-500"}),A.rector&&(0,b.jsxs)("div",{className:"mt-4 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"mb-3 text-sm font-semibold text-slate-600 dark:text-slate-400",children:"Ректор"}),(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)(F,{value:a.rector.photo,onChange:b=>r({...a,rector:{...a.rector,photo:b}}),label:"Фото ректора"})}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"mb-1.5 block text-xs font-medium text-slate-600 dark:text-slate-400",children:["ФИО (",y.toUpperCase(),")"]}),(0,b.jsx)("input",{type:"text",value:a.rector.name[y],onChange:b=>r({...a,rector:{...a.rector,name:{...a.rector.name,[y]:b.target.value}}}),className:G})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"mb-1.5 block text-xs font-medium text-slate-600 dark:text-slate-400",children:["Должность (",y.toUpperCase(),")"]}),(0,b.jsx)("input",{type:"text",value:a.rector.title[y],onChange:b=>r({...a,rector:{...a.rector,title:{...a.rector.title,[y]:b.target.value}}}),className:G})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-slate-600 dark:text-slate-400",children:"Проректоры"}),(0,b.jsxs)("button",{type:"button",onClick:()=>r({...a,proRectors:[...a.proRectors,{name:{kk:"",ru:"",en:""},title:{kk:"",ru:"",en:""},photo:""}]}),className:"flex items-center gap-1 rounded-md bg-blue-50 px-2.5 py-1 text-xs font-medium text-blue-600 hover:bg-blue-100 dark:bg-blue-600/10 dark:text-blue-400",children:[(0,b.jsx)(j.Plus,{size:12})," Добавить"]})]}),a.proRectors.map((c,d)=>(0,b.jsxs)("div",{className:"mb-3 rounded-lg border border-slate-100 p-4 dark:border-slate-800",children:[(0,b.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-xs font-medium text-slate-400",children:["Проректор ",d+1]}),(0,b.jsx)("button",{type:"button",onClick:()=>r({...a,proRectors:a.proRectors.filter((a,b)=>b!==d)}),className:"text-red-400 hover:text-red-600",children:(0,b.jsx)(k.Trash2,{size:14})})]}),(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsx)(F,{value:c.photo,onChange:b=>{let e=[...a.proRectors];e[d]={...c,photo:b},r({...a,proRectors:e})},label:"Фото"})}),(0,b.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,b.jsx)("input",{type:"text",placeholder:"ФИО",value:c.name[y],onChange:b=>{let e=[...a.proRectors];e[d]={...c,name:{...c.name,[y]:b.target.value}},r({...a,proRectors:e})},className:G}),(0,b.jsx)("input",{type:"text",placeholder:"Должность",value:c.title[y],onChange:b=>{let e=[...a.proRectors];e[d]={...c,title:{...c.title,[y]:b.target.value}},r({...a,proRectors:e})},className:G})]})]},d))]})]})]}),(0,b.jsxs)("section",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[(0,b.jsx)(H,{id:"stats",icon:(0,b.jsx)(g.Users,{size:18}),title:"Статистика",color:"text-emerald-500"}),A.stats&&(0,b.jsx)("div",{className:"mt-4 grid gap-4 sm:grid-cols-3",children:[["students","Студентов"],["programs","Бакалавр. программ"],["masterPrograms","Магистр. программ"],["employmentRate","Трудоустройство (%)"],["yearsOfExperience","Лет опыта"],["faculty","Преподавателей"],["doctorsOfScience","Докторов наук"],["candidatesOfScience","Кандидатов наук"],["phd","PhD"]].map(([c,d])=>(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1.5 block text-xs font-medium text-slate-600 dark:text-slate-400",children:d}),(0,b.jsx)("input",{type:"number",value:a.stats[c],onChange:b=>r({...a,stats:{...a.stats,[c]:Number(b.target.value)}}),className:G})]},c))})]}),(0,b.jsxs)("section",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[(0,b.jsx)(H,{id:"departments",icon:(0,b.jsx)(h.BookOpen,{size:18}),title:`Кафедры (${a.departments.length})`,color:"text-amber-500"}),A.departments&&(0,b.jsxs)("div",{className:"mt-4 space-y-3",children:[a.departments.map((c,d)=>(0,b.jsxs)("div",{className:"rounded-lg border border-slate-100 p-4 dark:border-slate-800",children:[(0,b.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-xs font-medium text-slate-400",children:["Кафедра ",d+1]}),(0,b.jsx)("button",{type:"button",onClick:()=>r({...a,departments:a.departments.filter((a,b)=>b!==d)}),className:"text-red-400 hover:text-red-600",children:(0,b.jsx)(k.Trash2,{size:14})})]}),(0,b.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"mb-1 block text-xs text-slate-500",children:["Полное название (",y.toUpperCase(),")"]}),(0,b.jsx)("input",{type:"text",value:c.name[y],onChange:b=>{let e=[...a.departments];e[d]={...c,name:{...c.name,[y]:b.target.value}},r({...a,departments:e})},className:G})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"mb-1 block text-xs text-slate-500",children:["Краткое (",y.toUpperCase(),")"]}),(0,b.jsx)("input",{type:"text",value:c.shortName[y],onChange:b=>{let e=[...a.departments];e[d]={...c,shortName:{...c.shortName,[y]:b.target.value}},r({...a,departments:e})},className:G})]})]})]},c.id||d)),(0,b.jsxs)("button",{type:"button",onClick:()=>r({...a,departments:[...a.departments,{id:`dept-${Date.now()}`,name:{kk:"",ru:"",en:""},shortName:{kk:"",ru:"",en:""},color:"#3B82F6",icon:"BookOpen"}]}),className:"flex w-full items-center justify-center gap-1 rounded-lg border-2 border-dashed border-slate-200 py-3 text-sm font-medium text-slate-400 hover:border-blue-300 hover:text-blue-500 dark:border-slate-700",children:[(0,b.jsx)(j.Plus,{size:16})," Добавить кафедру"]})]})]}),(0,b.jsxs)("section",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[(0,b.jsx)(H,{id:"programs",icon:(0,b.jsx)(f.GraduationCap,{size:18}),title:`Программы (${a.programs.length})`,color:"text-blue-500"}),A.programs&&(0,b.jsxs)("div",{className:"mt-4 space-y-3",children:[a.programs.map((c,d)=>(0,b.jsxs)("div",{className:"rounded-lg border border-slate-100 p-4 dark:border-slate-800",children:[(0,b.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,b.jsx)("span",{className:"rounded bg-blue-50 px-2 py-0.5 text-xs font-bold text-blue-600 dark:bg-blue-600/10 dark:text-blue-400",children:c.code||"Новая"}),(0,b.jsx)("button",{type:"button",onClick:()=>r({...a,programs:a.programs.filter((a,b)=>b!==d)}),className:"text-red-400 hover:text-red-600",children:(0,b.jsx)(k.Trash2,{size:14})})]}),(0,b.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"mb-1 block text-xs text-slate-500",children:["Название (",y.toUpperCase(),")"]}),(0,b.jsx)("input",{type:"text",value:c.name[y],onChange:b=>{let e=[...a.programs];e[d]={...c,name:{...c.name,[y]:b.target.value}},r({...a,programs:e})},className:G})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1 block text-xs text-slate-500",children:"Код"}),(0,b.jsx)("input",{type:"text",value:c.code,onChange:b=>{let e=[...a.programs];e[d]={...c,code:b.target.value},r({...a,programs:e})},className:G})]})]}),(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsxs)("label",{className:"mb-1 block text-xs text-slate-500",children:["Описание (",y.toUpperCase(),")"]}),(0,b.jsx)("input",{type:"text",value:c.description[y],onChange:b=>{let e=[...a.programs];e[d]={...c,description:{...c.description,[y]:b.target.value}},r({...a,programs:e})},className:G})]}),(0,b.jsxs)("div",{className:"mt-2 grid gap-3 sm:grid-cols-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1 block text-xs text-slate-500",children:"Кафедра"}),(0,b.jsxs)("select",{value:c.department,onChange:b=>{let e=[...a.programs];e[d]={...c,department:b.target.value},r({...a,programs:e})},className:G,children:[(0,b.jsx)("option",{value:"",children:"—"}),a.departments.map(a=>(0,b.jsx)("option",{value:a.id,children:a.shortName.ru||a.id},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1 block text-xs text-slate-500",children:"Уровень"}),(0,b.jsxs)("select",{value:c.degree,onChange:b=>{let e=[...a.programs];e[d]={...c,degree:b.target.value},r({...a,programs:e})},className:G,children:[(0,b.jsx)("option",{value:"bachelor",children:"Бакалавриат"}),(0,b.jsx)("option",{value:"master",children:"Магистратура"}),(0,b.jsx)("option",{value:"doctorate",children:"Докторантура"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1 block text-xs text-slate-500",children:"Срок обучения (лет)"}),(0,b.jsx)("input",{type:"number",value:c.duration,onChange:b=>{let e=[...a.programs];e[d]={...c,duration:Number(b.target.value)},r({...a,programs:e})},className:G})]})]})]},c.id||d)),(0,b.jsxs)("button",{type:"button",onClick:()=>r({...a,programs:[...a.programs,{id:`prog-${Date.now()}`,code:"",department:a.departments[0]?.id||"",degree:"bachelor",credits:240,duration:4,languages:["kk","ru"],name:{kk:"",ru:"",en:""},description:{kk:"",ru:"",en:""}}]}),className:"flex w-full items-center justify-center gap-1 rounded-lg border-2 border-dashed border-slate-200 py-3 text-sm font-medium text-slate-400 hover:border-blue-300 hover:text-blue-500 dark:border-slate-700",children:[(0,b.jsx)(j.Plus,{size:16})," Добавить программу"]})]})]}),(0,b.jsxs)("section",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[(0,b.jsx)(H,{id:"centers",icon:(0,b.jsx)(i.Building2,{size:18}),title:"Центры и службы",color:"text-teal-500"}),A.centers&&(0,b.jsxs)("div",{className:"mt-4 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"mb-3 text-sm font-semibold text-slate-600 dark:text-slate-400",children:["Административные центры (",a.adminCenters.length,")"]}),a.adminCenters.map((c,d)=>(0,b.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,b.jsx)("input",{type:"text",value:c.name[y],onChange:b=>{let e=[...a.adminCenters];e[d]={...c,name:{...c.name,[y]:b.target.value}},r({...a,adminCenters:e})},className:G}),(0,b.jsx)("button",{type:"button",onClick:()=>r({...a,adminCenters:a.adminCenters.filter((a,b)=>b!==d)}),className:"shrink-0 text-red-400 hover:text-red-600",children:(0,b.jsx)(k.Trash2,{size:14})})]},d)),(0,b.jsxs)("button",{type:"button",onClick:()=>r({...a,adminCenters:[...a.adminCenters,{name:{kk:"",ru:"",en:""},icon:"Building2"}]}),className:"mt-1 flex items-center gap-1 text-xs font-medium text-blue-500 hover:text-blue-600",children:[(0,b.jsx)(j.Plus,{size:12})," Добавить центр"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"mb-3 text-sm font-semibold text-slate-600 dark:text-slate-400",children:["Служебные подразделения (",a.serviceUnits.length,")"]}),a.serviceUnits.map((c,d)=>(0,b.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,b.jsx)("input",{type:"text",value:c.name[y],onChange:b=>{let e=[...a.serviceUnits];e[d]={...c,name:{...c.name,[y]:b.target.value}},r({...a,serviceUnits:e})},className:G}),(0,b.jsx)("button",{type:"button",onClick:()=>r({...a,serviceUnits:a.serviceUnits.filter((a,b)=>b!==d)}),className:"shrink-0 text-red-400 hover:text-red-600",children:(0,b.jsx)(k.Trash2,{size:14})})]},d)),(0,b.jsxs)("button",{type:"button",onClick:()=>r({...a,serviceUnits:[...a.serviceUnits,{name:{kk:"",ru:"",en:""}}]}),className:"mt-1 flex items-center gap-1 text-xs font-medium text-blue-500 hover:text-blue-600",children:[(0,b.jsx)(j.Plus,{size:12})," Добавить службу"]})]})]})]})]})}a.s(["default",()=>r])}];

//# sourceMappingURL=src_app_admin_university_page_tsx_d718d262._.js.map