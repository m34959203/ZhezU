(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8607],{892:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},2017:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},2206:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},2785:(e,t,a)=>{Promise.resolve().then(a.bind(a,7363))},3617:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(4917);let l=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:n="",children:d,iconNode:c,...o},m)=>(0,s.createElement)("svg",{ref:m,...i,width:t,height:t,stroke:e,strokeWidth:r?24*Number(a)/Number(t):a,className:l("lucide",n),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(o)&&{"aria-hidden":"true"},...o},[...c.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(d)?d:[d]])),d=(e,t)=>{let a=(0,s.forwardRef)(({className:a,...i},d)=>(0,s.createElement)(n,{ref:d,iconNode:t,className:l(`lucide-${r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...i}));return a.displayName=r(e),a}},5158:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},5447:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5544:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},6427:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7363:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(401),l=a(4917),r=a(6427),i=a(5158),n=a(2017),d=a(2206),c=a(5544),o=a(5447),m=a(892),h=a(8178);let x=(0,a(3617).A)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),u=[{key:"students",label:"Количество студентов"},{key:"programs",label:"Программы обучения"},{key:"employment",label:"Трудоустройство"},{key:"years",label:"Годы опыта"},{key:"faculty",label:"Преподаватели"},{key:"masters",label:"Магистерские программы"}],p={news:"Новости",announcement:"Объявления",event:"События",achievement:"Достижения",university:"Университет",science:"Наука",students:"Студенты",sport:"Спорт",culture:"Культура"};async function b(e){let t=new FormData;t.append("file",e);try{let e=await fetch("/api/admin/upload",{method:"POST",body:t});if(!e.ok)return null;let{url:a}=await e.json();return a}catch{return null}}function g(){let[e,t]=(0,l.useState)(null),[a,g]=(0,l.useState)([]),[k,y]=(0,l.useState)(!0),[j,f]=(0,l.useState)(!1),[v,N]=(0,l.useState)(!1),[w,A]=(0,l.useState)(null);async function C(){f(!0),N(!1);try{(await fetch("/api/admin/homepage",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&(N(!0),setTimeout(()=>N(!1),2e3))}finally{f(!1)}}if((0,l.useEffect)(()=>{let e=new AbortController;return Promise.all([fetch("/api/admin/homepage",{signal:e.signal}).then(e=>e.ok?e.json():null),fetch("/api/public/university",{signal:e.signal}).then(e=>e.ok?e.json():null)]).then(([e,a])=>{e&&t(e),a?.programs&&g(a.programs)}).catch(()=>{}).finally(()=>y(!1)),()=>e.abort()},[]),k||!e)return(0,s.jsx)("div",{className:"flex items-center justify-center py-32",children:(0,s.jsx)(r.A,{size:24,className:"animate-spin text-blue-500"})});let M="w-full rounded-lg border border-slate-200 bg-white px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none dark:border-slate-700 dark:bg-slate-800 dark:text-white";return(0,s.jsxs)("div",{className:"mx-auto max-w-3xl space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Главная страница"}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Hero-секция, статистика, изображения программ"})]}),(0,s.jsxs)("button",{type:"button",onClick:C,disabled:j,className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2.5 text-sm font-semibold text-white transition-colors hover:bg-blue-700 disabled:opacity-50",children:[j?(0,s.jsx)(r.A,{size:14,className:"animate-spin"}):(0,s.jsx)(i.A,{size:14}),v?"Сохранено!":"Сохранить"]})]}),(0,s.jsxs)("section",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[(0,s.jsxs)("h3",{className:"mb-4 flex items-center gap-2 font-bold text-slate-900 dark:text-white",children:[(0,s.jsx)(n.A,{size:18,className:"text-blue-500"}),"Hero-секция"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-1.5 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Заголовок (большой текст на главной)"}),(0,s.jsx)("input",{type:"text",value:e.heroTitle,onChange:a=>t({...e,heroTitle:a.target.value}),className:M})]})]}),(0,s.jsxs)("section",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[(0,s.jsxs)("h3",{className:"mb-2 flex items-center gap-2 font-bold text-slate-900 dark:text-white",children:[(0,s.jsx)(d.A,{size:18,className:"text-emerald-500"}),"Статистика на главной"]}),(0,s.jsx)("p",{className:"mb-4 text-xs text-slate-400",children:"Выберите какие показатели отображать на баннере. Значения берутся из раздела \xabУниверситет\xbb."}),(0,s.jsxs)("div",{className:"space-y-2",children:[e.stats.map((a,l)=>(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("select",{value:a,onChange:a=>{let s=[...e.stats];s[l]=a.target.value,t({...e,stats:s})},className:M,children:[(0,s.jsx)("option",{value:"",children:"— Выберите —"}),u.map(e=>(0,s.jsx)("option",{value:e.key,children:e.label},e.key))]}),(0,s.jsx)("button",{type:"button",onClick:()=>t({...e,stats:e.stats.filter((e,t)=>t!==l)}),className:"shrink-0 text-red-400 hover:text-red-600",children:(0,s.jsx)(c.A,{size:14})})]},l)),e.stats.length<u.length&&(0,s.jsxs)("button",{type:"button",onClick:()=>t({...e,stats:[...e.stats,""]}),className:"flex items-center gap-1 text-xs font-medium text-blue-500 hover:text-blue-600",children:[(0,s.jsx)(o.A,{size:12})," Добавить показатель"]})]})]}),(0,s.jsxs)("section",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[(0,s.jsxs)("h3",{className:"mb-2 flex items-center gap-2 font-bold text-slate-900 dark:text-white",children:[(0,s.jsx)(m.A,{size:18,className:"text-purple-500"}),"Изображения программ"]}),(0,s.jsx)("p",{className:"mb-4 text-xs text-slate-400",children:"Программы, которые будут показаны на главной странице с фотографией"}),(0,s.jsxs)("div",{className:"space-y-3",children:[Object.entries(e.programImages).map(([l,i])=>(0,s.jsxs)("div",{className:"flex flex-col gap-2 rounded-lg border border-slate-100 bg-slate-50 p-3 dark:border-slate-700 dark:bg-slate-800/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("select",{value:l,onChange:a=>{let s={...e.programImages};delete s[l],s[a.target.value]=i,t({...e,programImages:s})},className:M+" max-w-[280px]",children:[(0,s.jsx)("option",{value:"",children:"— Выберите программу —"}),a.map(t=>(0,s.jsx)("option",{value:t.id,disabled:t.id!==l&&t.id in e.programImages,children:t.name.ru},t.id))]}),(0,s.jsx)("button",{type:"button",onClick:()=>{let{[l]:a,...s}=e.programImages;t({...e,programImages:s})},className:"shrink-0 text-red-400 hover:text-red-600",children:(0,s.jsx)(c.A,{size:14})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[i&&(0,s.jsx)("div",{className:"h-12 w-12 shrink-0 overflow-hidden rounded-lg border border-slate-200 dark:border-slate-700",children:(0,s.jsx)("img",{src:i,alt:"",className:"h-full w-full object-cover"})}),(0,s.jsx)("input",{type:"url",value:i,onChange:a=>t({...e,programImages:{...e.programImages,[l]:a.target.value}}),placeholder:"Ссылка на изображение",className:M}),(0,s.jsxs)("label",{className:"flex shrink-0 cursor-pointer items-center gap-1.5 rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs font-medium text-slate-600 transition-colors hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700",children:[w===l?(0,s.jsx)(r.A,{size:14,className:"animate-spin"}):(0,s.jsx)(h.A,{size:14}),w===l?"Загрузка...":"Загрузить",(0,s.jsx)("input",{type:"file",accept:"image/jpeg,image/png,image/webp",className:"hidden",onChange:async e=>{let a=e.target.files?.[0];if(!a)return;A(l);let s=await b(a);s&&t(e=>e?{...e,programImages:{...e.programImages,[l]:s}}:e),A(null),e.target.value=""}})]})]})]},l)),(0,s.jsxs)("button",{type:"button",onClick:()=>t({...e,programImages:{...e.programImages,"":""}}),className:"flex items-center gap-1 text-xs font-medium text-blue-500 hover:text-blue-600",children:[(0,s.jsx)(o.A,{size:12})," Добавить программу"]})]})]}),(0,s.jsxs)("section",{className:"rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[(0,s.jsxs)("h3",{className:"mb-2 flex items-center gap-2 font-bold text-slate-900 dark:text-white",children:[(0,s.jsx)(x,{size:18,className:"text-amber-500"}),"Метки категорий новостей"]}),(0,s.jsx)("p",{className:"mb-4 text-xs text-slate-400",children:"Текст, который отображается на карточках новостей для каждой категории"}),(0,s.jsx)("div",{className:"space-y-2",children:Object.entries(e.categoryLabels).map(([a,l])=>(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"min-w-[120px] text-sm text-slate-500",children:p[a]??a}),(0,s.jsx)("input",{type:"text",value:l,onChange:s=>t({...e,categoryLabels:{...e.categoryLabels,[a]:s.target.value}}),className:M})]},a))})]})]})}},8178:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])}},e=>{e.O(0,[9675,5334,7358],()=>e(e.s=2785)),_N_E=e.O()}]);