(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[359],{3617:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(54917);let l=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:i="",children:d,iconNode:o,...c},u)=>(0,s.createElement)("svg",{ref:u,...n,width:t,height:t,stroke:e,strokeWidth:r?24*Number(a)/Number(t):a,className:l("lucide",i),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(c)&&{"aria-hidden":"true"},...c},[...o.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(d)?d:[d]])),d=(e,t)=>{let a=(0,s.forwardRef)(({className:a,...n},d)=>(0,s.createElement)(i,{ref:d,iconNode:t,className:l(`lucide-${r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...n}));return a.displayName=r(e),a}},9593:(e,t,a)=>{Promise.resolve().then(a.bind(a,98419))},35764:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},36499:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},43893:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},48661:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},53910:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]])},56427:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},65158:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},70361:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},98419:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(90401),l=a(54917),r=a(36499),n=a(56427),i=a(53910),d=a(48661),o=a(43893),c=a(65158),u=a(70361),x=a(35764);let m=[{code:"ru",label:"Русский",flag:"\uD83C\uDDF7\uD83C\uDDFA"},{code:"kk",label:"Қазақша",flag:"\uD83C\uDDF0\uD83C\uDDFF"},{code:"en",label:"English",flag:"\uD83C\uDDEC\uD83C\uDDE7"}],p=[{key:"home",label:"Главная"},{key:"nav",label:"Навигация"},{key:"admission",label:"Поступление"},{key:"university",label:"Университет"},{key:"academics",label:"Образование"},{key:"research",label:"Наука"},{key:"aiCenter",label:"AI-Центр"},{key:"life",label:"Жизнь"},{key:"contact",label:"Контакты"},{key:"metadata",label:"SEO / Мета"}];function h(e,t=""){let a={};for(let[s,l]of Object.entries(e)){let e=t?`${t}.${s}`:s;l&&"object"==typeof l&&!Array.isArray(l)?Object.assign(a,h(l,e)):a[e]=String(l??"")}return a}function b(){let[e,t]=(0,l.useState)("ru"),[a,b]=(0,l.useState)("home"),[f,y]=(0,l.useState)({}),[k,g]=(0,l.useState)(!1),[j,v]=(0,l.useState)(!1),[w,N]=(0,l.useState)(!1),[A,C]=(0,l.useState)(""),[z,E]=(0,l.useState)(!1),[S,O]=(0,l.useState)(null),[$,L]=(0,l.useState)(null),M=(0,l.useRef)(null);(0,l.useEffect)(()=>{function t(t){M.current&&!M.current.contains(t.target)&&S===e&&O(null)}return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[S,e]);let _=(0,l.useCallback)(async()=>{g(!0);try{let t=await fetch(`/api/admin/translations?locale=${e}&namespace=${a}`);if(t.ok){let e=await t.json();y(h(e))}}finally{g(!1)}},[e,a]);async function T(){v(!0),N(!1);try{let t=function(e){let t={};for(let[a,s]of Object.entries(e)){let e=a.split("."),l=t;for(let t=0;t<e.length-1;t++)e[t]in l&&"object"==typeof l[e[t]]||(l[e[t]]={}),l=l[e[t]];l[e[e.length-1]]=s}return t}(f);(await fetch("/api/admin/translations",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({locale:e,namespace:a,data:t})})).ok&&(N(!0),setTimeout(()=>N(!1),2e3))}finally{v(!1)}}async function P(t){E(!0),O(t),L(null);try{let s=await fetch(`/api/admin/translations?locale=${t}&namespace=${a}`);if(!s.ok)throw Error("Не удалось загрузить исходные переводы");let l=await s.json(),r=h(l),n={};for(let[e,t]of Object.entries(r))t.trim()&&(n[e]=t);if(0===Object.keys(n).length)return void L({ok:!1,message:"Нет текста для перевода в исходном языке"});let i=await fetch("/api/admin/ai/translate-keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keys:n,sourceLang:t,targetLang:e})});if(!i.ok){let e=await i.json();throw Error(e.error||"Ошибка перевода")}let{translations:d}=await i.json();y(e=>({...e,...d})),L({ok:!0,message:`Переведено ${Object.keys(d).length} ключей`}),setTimeout(()=>L(null),4e3)}catch(e){L({ok:!1,message:e instanceof Error?e.message:"Ошибка перевода"}),setTimeout(()=>L(null),4e3)}finally{E(!1),O(null)}}(0,l.useEffect)(()=>{_()},[_]);let R=Object.keys(f).filter(e=>e.toLowerCase().includes(A.toLowerCase())||f[e].toLowerCase().includes(A.toLowerCase()));return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,s.jsx)("div",{className:"flex gap-1 rounded-lg border border-slate-200 bg-white p-1 dark:border-slate-700 dark:bg-slate-800",children:m.map(a=>(0,s.jsx)("button",{type:"button",onClick:()=>t(a.code),className:`flex items-center gap-1.5 rounded-md px-3 py-1.5 text-xs font-medium transition-colors ${e===a.code?"bg-blue-600 text-white":"text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white"}`,children:a.label},a.code))}),(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(r.A,{size:16,className:"absolute top-1/2 left-3 -translate-y-1/2 text-slate-400"}),(0,s.jsx)("input",{type:"text",value:A,onChange:e=>C(e.target.value),placeholder:"Поиск по ключу или значению...",className:"w-full rounded-lg border border-slate-200 bg-white py-2.5 pr-4 pl-10 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none dark:border-slate-700 dark:bg-slate-800 dark:text-white"})]}),(0,s.jsxs)("div",{className:"relative",ref:M,children:[(0,s.jsxs)("button",{type:"button",disabled:z,onClick:()=>O(S?null:e),className:"flex items-center gap-2 rounded-lg bg-purple-600 px-4 py-2.5 text-sm font-semibold text-white transition-colors hover:bg-purple-700 disabled:opacity-50",children:[z?(0,s.jsx)(n.A,{size:14,className:"animate-spin"}):(0,s.jsx)(i.A,{size:14}),"Автоперевод"]}),S===e&&!z&&(0,s.jsxs)("div",{className:"absolute top-full right-0 z-50 mt-1 min-w-[200px] rounded-lg border border-slate-200 bg-white py-1 shadow-lg dark:border-slate-700 dark:bg-slate-800",children:[(0,s.jsx)("div",{className:"px-3 py-1.5 text-xs font-medium text-slate-400",children:"Перевести из:"}),m.filter(t=>t.code!==e).map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>{O(null),P(e.code)},className:"flex w-full items-center gap-2 px-3 py-2 text-left text-sm text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-700",children:[(0,s.jsx)("span",{children:e.flag}),e.label]},e.code))]})]}),$&&(0,s.jsxs)("div",{className:`flex items-center gap-1.5 rounded-lg px-3 py-2 text-xs font-medium ${$.ok?"bg-green-50 text-green-700 dark:bg-green-500/10 dark:text-green-400":"bg-red-50 text-red-700 dark:bg-red-500/10 dark:text-red-400"}`,children:[$.ok?(0,s.jsx)(d.A,{size:12}):(0,s.jsx)(o.A,{size:12}),$.message]}),(0,s.jsxs)("button",{type:"button",onClick:T,disabled:j,className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2.5 text-sm font-semibold text-white transition-colors hover:bg-blue-700 disabled:opacity-50",children:[j?(0,s.jsx)(n.A,{size:14,className:"animate-spin"}):(0,s.jsx)(c.A,{size:14}),w?"Сохранено!":"Сохранить"]})]}),(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsx)("div",{className:"w-56 shrink-0 space-y-1",children:p.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>b(e.key),className:`flex w-full items-center justify-between rounded-lg px-3 py-2.5 text-left text-sm font-medium transition-colors ${a===e.key?"bg-blue-50 text-blue-600 dark:bg-blue-500/10 dark:text-blue-400":"text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800"}`,children:[e.label,(0,s.jsx)(u.A,{size:14,className:a===e.key?"":"opacity-0"})]},e.key))}),(0,s.jsxs)("div",{className:"flex-1 overflow-hidden rounded-xl border border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900",children:[(0,s.jsx)("div",{className:"flex items-center justify-between border-b border-slate-200 px-6 py-3 dark:border-slate-800",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(x.A,{size:14,className:"text-slate-400"}),(0,s.jsx)("span",{className:"font-medium text-slate-900 dark:text-white",children:p.find(e=>e.key===a)?.label}),(0,s.jsx)("span",{className:"text-slate-400",children:"\xb7"}),(0,s.jsxs)("span",{className:"text-slate-400",children:[R.length," ключей"]})]})}),z?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 py-16",children:[(0,s.jsx)(n.A,{size:24,className:"animate-spin text-purple-500"}),(0,s.jsxs)("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:["Переводим с ",m.find(e=>e.code===S)?.label||"...","..."]})]}):k?(0,s.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,s.jsx)(n.A,{size:24,className:"animate-spin text-blue-500"})}):0===R.length?(0,s.jsx)("div",{className:"py-16 text-center text-sm text-slate-400",children:A?"Ничего не найдено":"Нет данных для этого раздела"}):(0,s.jsx)("div",{className:"max-h-[calc(100vh-280px)] divide-y divide-slate-100 overflow-y-auto dark:divide-slate-800",children:R.map(e=>(0,s.jsxs)("div",{className:"grid grid-cols-[280px_1fr] items-start gap-4 px-6 py-3",children:[(0,s.jsx)("label",{className:"truncate pt-2.5 font-mono text-xs text-slate-400",children:e}),f[e].length>80?(0,s.jsx)("textarea",{value:f[e],onChange:t=>y(a=>({...a,[e]:t.target.value})),rows:3,className:"w-full resize-y rounded border border-slate-200 bg-transparent px-3 py-2 text-sm text-slate-900 focus:border-blue-500 focus:outline-none dark:border-slate-700 dark:text-white"}):(0,s.jsx)("input",{type:"text",value:f[e],onChange:t=>y(a=>({...a,[e]:t.target.value})),className:"w-full rounded border border-slate-200 bg-transparent px-3 py-2 text-sm text-slate-900 focus:border-blue-500 focus:outline-none dark:border-slate-700 dark:text-white"})]},e))})]})]})]})}}},e=>{e.O(0,[9675,5334,7358],()=>e(e.s=9593)),_N_E=e.O()}]);