(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4010],{13872:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3617).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},15388:(e,t,s)=>{"use strict";s.d(t,{Y:()=>n,cn:()=>l});var a=s(14580),r=s(69274);function l(...e){return(0,r.QP)((0,a.$)(e))}let d={а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"yo",ж:"zh",з:"z",и:"i",й:"y",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"kh",ц:"ts",ч:"ch",ш:"sh",щ:"shch",ъ:"",ы:"y",ь:"",э:"e",ю:"yu",я:"ya",ә:"a",ғ:"g",қ:"q",ң:"n",ө:"o",ұ:"u",ү:"u",һ:"h",і:"i"};function n(e){return e.toLowerCase().split("").map(e=>d[e]??e).join("").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").replace(/-{2,}/g,"-")}},20271:(e,t,s)=>{"use strict";var a=s(5655);s.o(a,"permanentRedirect")&&s.d(t,{permanentRedirect:function(){return a.permanentRedirect}}),s.o(a,"redirect")&&s.d(t,{redirect:function(){return a.redirect}}),s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},20698:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3617).A)("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]])},27404:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3617).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},27720:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3617).A)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},38178:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3617).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},43893:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3617).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},48661:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3617).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},53668:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3617).A)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]])},53910:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3617).A)("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]])},56427:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3617).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},62782:(e,t,s)=>{Promise.resolve().then(s.bind(s,94700))},65158:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3617).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},75544:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3617).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},81484:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3617).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},87389:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3617).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},90228:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3617).A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},92105:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(3617).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},94700:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>$});var a=s(90401),r=s(54917),l=s(20271),d=s(56427),n=s(3617);let i=(0,n.A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var o=s(75544),c=s(65158),u=s(53668),p=s(53910),x=s(90228),b=s(92105),m=s(87389),h=s(27720),g=s(43893),k=s(48661),y=s(13872);let f=(0,n.A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var j=s(38178),v=s(27404),N=s(81484),w=s(20698),A=s(15388);let z=(0,r.lazy)(()=>Promise.all([s.e(996),s.e(7084),s.e(4302),s.e(9606)]).then(s.bind(s,79606))),C=(0,r.lazy)(()=>s.e(9185).then(s.bind(s,99185))),M=[{value:"news",label:"Новость"},{value:"announcement",label:"Объявление"},{value:"event",label:"Событие"},{value:"achievement",label:"Достижение"},{value:"university",label:"Университет"},{value:"science",label:"Наука"},{value:"students",label:"Студенты"},{value:"sport",label:"Спорт"},{value:"culture",label:"Культура"}],S=[{code:"ru",label:"RU"},{code:"kk",label:"KK"},{code:"en",label:"EN"}],T={kk:"Казахский",ru:"Русский",en:"Английский"},P={kk:"",ru:"",en:""};function $(){let{id:e}=(0,l.useParams)(),t=(0,l.useRouter)(),s="new"===e,[n,$]=(0,r.useState)({slug:"",title:{...P},excerpt:{...P},body:{...P},category:"news",image:"",published:!0,pinned:!1,author:"Администратор"}),[R,E]=(0,r.useState)("ru"),[I,O]=(0,r.useState)(!s),[H,U]=(0,r.useState)(!s),[_,V]=(0,r.useState)(!1),[q,J]=(0,r.useState)(!1),[L,B]=(0,r.useState)(!1),[Y,D]=(0,r.useState)(null),[G,K]=(0,r.useState)(!1),[F,Q]=(0,r.useState)(!1),[W,X]=(0,r.useState)(null),[Z,ee]=(0,r.useState)(!1),[et,es]=(0,r.useState)(!1),[ea,er]=(0,r.useState)(!1),[el,ed]=(0,r.useState)(null),[en,ei]=(0,r.useState)(null),[eo,ec]=(0,r.useState)(null),[eu,ep]=(0,r.useState)({});function ex(e,t){$(s=>{let a={...s,[e]:{...s[e],[R]:t}};return"title"!==e||I||(a.slug=(0,A.Y)(t)),a})}async function eb(){V(!0),J(!1);try{let a=s?"/api/admin/news":`/api/admin/news/${e}`,r=s?"POST":"PUT",l=await fetch(a,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(l.ok){let e=await l.json();if(J(!0),s&&t.replace(`/admin/news/${e.id}`),e.autoPublishResult){let t=[];e.autoPublishResult.telegram?.ok&&t.push("Telegram"),e.autoPublishResult.instagram?.ok&&t.push("Instagram"),t.length>0&&(ed(`Автопубликация: ${t.join(", ")}`),ep(t=>({...t,...e.autoPublishResult.telegram?.ok?{telegram:!0}:{},...e.autoPublishResult.instagram?.ok?{instagram:!0}:{}})),setTimeout(()=>ed(null),5e3))}e.socialPublished&&ep(e.socialPublished),setTimeout(()=>J(!1),2e3)}}finally{V(!1)}}async function em(){confirm("Удалить публикацию?")&&(await fetch(`/api/admin/news/${e}`,{method:"DELETE"}),t.push("/admin/news"))}(0,r.useEffect)(()=>{if(s)return;let t=new AbortController;return fetch(`/api/admin/news/${e}`,{signal:t.signal}).then(e=>e.ok?e.json():null).then(e=>{e&&($(e),e.socialPublished&&ep(e.socialPublished))}).catch(()=>{}).finally(()=>U(!1)),()=>t.abort()},[e,s]),(0,r.useEffect)(()=>{fetch("/api/admin/social/telegram").then(e=>e.ok?e.json():null).then(e=>{e&&ei(e.configured)}).catch(()=>{}),fetch("/api/admin/social/instagram").then(e=>e.ok?e.json():null).then(e=>{e&&ec(e.configured)}).catch(()=>{})},[]);let eh=(0,r.useCallback)(async e=>{K(!1),B(!0),D(e);try{let t=await fetch("/api/admin/ai/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n.title[R],excerpt:n.excerpt[R],body:n.body[R],sourceLang:R,targetLang:e})});if(!t.ok){let e=await t.json();alert(`Ошибка перевода: ${e.error}`);return}let s=await t.json();$(t=>({...t,title:{...t.title,[e]:s.title},excerpt:{...t.excerpt,[e]:s.excerpt},body:{...t.body,[e]:s.body}}))}catch{alert("Не удалось выполнить перевод")}finally{B(!1),D(null)}},[R,n]),eg=(0,r.useCallback)(async()=>{Q(!0),ee(!0),X(null);try{let e=await fetch("/api/admin/ai/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n.title[R],excerpt:n.excerpt[R],body:n.body[R],category:n.category})});if(!e.ok){let t=await e.json();alert(`Ошибка анализа: ${t.error}`),ee(!1);return}let t=await e.json();X(t)}catch{alert("Не удалось выполнить анализ"),ee(!1)}finally{Q(!1)}},[R,n]),ek=(0,r.useCallback)(async()=>{if(confirm("Опубликовать в Telegram-канал?")){es(!0),ed(null);try{let t=await fetch("/api/admin/social/telegram",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({articleId:e,lang:"ru"})}),s=await t.json();t.ok?(ed("Опубликовано в Telegram!"),setTimeout(()=>ed(null),3e3)):ed(`Ошибка: ${s.error}`)}catch{ed("Ошибка подключения")}finally{es(!1)}}},[e]),ey=(0,r.useCallback)(async()=>{if(confirm("Опубликовать в Instagram?")){er(!0),ed(null);try{let t=await fetch("/api/admin/social/instagram",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({articleId:e,lang:"ru"})}),s=await t.json();t.ok?(ed("Опубликовано в Instagram!"),setTimeout(()=>ed(null),3e3)):ed(`Ошибка: ${s.error}`)}catch{ed("Ошибка подключения")}finally{er(!1)}}},[e]),[ef,ej]=(0,r.useState)(!1);function ev(e,t){$(s=>({...s,[e]:{...s[e],[R]:t}}))}if(H)return(0,a.jsx)("div",{className:"flex items-center justify-center py-32",children:(0,a.jsx)(d.A,{size:24,className:"animate-spin text-blue-500"})});let eN=S.filter(e=>e.code!==R),ew=n.title[R].length>0||n.body[R].length>0;return(0,a.jsxs)("div",{className:"mx-auto max-w-4xl space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>t.push("/admin/news"),className:"flex items-center gap-2 text-sm text-slate-500 transition-colors hover:text-slate-900 dark:hover:text-white",children:[(0,a.jsx)(i,{size:16}),"Назад к списку"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[!s&&(0,a.jsxs)("button",{type:"button",onClick:em,className:"flex items-center gap-1.5 rounded-lg border border-red-200 px-3 py-2 text-sm text-red-500 transition-colors hover:bg-red-50 dark:border-red-500/20 dark:hover:bg-red-500/10",children:[(0,a.jsx)(o.A,{size:14}),"Удалить"]}),(0,a.jsxs)("button",{type:"button",onClick:eb,disabled:_,className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white transition-colors hover:bg-blue-700 disabled:opacity-50",children:[_?(0,a.jsx)(d.A,{size:14,className:"animate-spin"}):(0,a.jsx)(c.A,{size:14}),q?"Сохранено!":"Сохранить"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 rounded-xl border border-purple-200 bg-purple-50/50 p-3 dark:border-purple-500/20 dark:bg-purple-500/5",children:[(0,a.jsxs)("span",{className:"mr-1 flex items-center gap-1.5 text-xs font-semibold text-purple-600 uppercase dark:text-purple-400",children:[(0,a.jsx)(u.A,{size:14}),"AI"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>K(!G),disabled:L||!ew,className:"flex items-center gap-1.5 rounded-lg border border-purple-200 bg-white px-3 py-1.5 text-xs font-medium text-purple-700 transition-colors hover:bg-purple-50 disabled:opacity-50 dark:border-purple-500/30 dark:bg-slate-800 dark:text-purple-300 dark:hover:bg-slate-700",children:[L?(0,a.jsx)(d.A,{size:12,className:"animate-spin"}):(0,a.jsx)(p.A,{size:12}),L?`${T[R]} -> ${Y?T[Y]:"..."}...`:`Перевести с ${R.toUpperCase()}`,!L&&(G?(0,a.jsx)(x.A,{size:10}):(0,a.jsx)(b.A,{size:10}))]}),G&&(0,a.jsxs)("div",{className:"absolute top-full left-0 z-10 mt-1 rounded-lg border border-slate-200 bg-white py-1 shadow-lg dark:border-slate-700 dark:bg-slate-800",children:[eN.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>eh(e.code),className:"flex w-full items-center gap-2 px-4 py-2 text-left text-xs hover:bg-purple-50 dark:hover:bg-slate-700",children:[(0,a.jsx)(p.A,{size:12,className:"text-purple-500"}),(0,a.jsxs)("span",{children:[R.toUpperCase()," -> ",e.label," (",T[e.code],")"]})]},e.code)),(0,a.jsx)("div",{className:"my-1 border-t border-slate-100 dark:border-slate-700"}),(0,a.jsxs)("button",{type:"button",onClick:async()=>{for(let e of eN)await eh(e.code)},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-xs font-medium text-purple-600 hover:bg-purple-50 dark:text-purple-400 dark:hover:bg-slate-700",children:[(0,a.jsx)(p.A,{size:12}),"Перевести на все языки"]})]})]}),(0,a.jsxs)("button",{type:"button",onClick:eg,disabled:F||!ew,className:"flex items-center gap-1.5 rounded-lg border border-purple-200 bg-white px-3 py-1.5 text-xs font-medium text-purple-700 transition-colors hover:bg-purple-50 disabled:opacity-50 dark:border-purple-500/30 dark:bg-slate-800 dark:text-purple-300 dark:hover:bg-slate-700",children:[F?(0,a.jsx)(d.A,{size:12,className:"animate-spin"}):(0,a.jsx)(u.A,{size:12}),F?"Анализ...":"AI-анализ"]}),!s&&en&&(0,a.jsxs)("button",{type:"button",onClick:ek,disabled:et,className:"flex items-center gap-1.5 rounded-lg border border-blue-200 bg-white px-3 py-1.5 text-xs font-medium text-blue-700 transition-colors hover:bg-blue-50 disabled:opacity-50 dark:border-blue-500/30 dark:bg-slate-800 dark:text-blue-300 dark:hover:bg-slate-700",children:[et?(0,a.jsx)(d.A,{size:12,className:"animate-spin"}):(0,a.jsx)(m.A,{size:12}),et?"Отправка...":"Telegram"]}),!s&&eo&&(0,a.jsxs)("button",{type:"button",onClick:ey,disabled:ea,className:"flex items-center gap-1.5 rounded-lg border border-pink-200 bg-white px-3 py-1.5 text-xs font-medium text-pink-700 transition-colors hover:bg-pink-50 disabled:opacity-50 dark:border-pink-500/30 dark:bg-slate-800 dark:text-pink-300 dark:hover:bg-slate-700",children:[ea?(0,a.jsx)(d.A,{size:12,className:"animate-spin"}):(0,a.jsx)(h.A,{size:12}),ea?"Отправка...":"Instagram"]}),el&&(0,a.jsx)("span",{className:`text-xs font-medium ${el.startsWith("Ошибка")?"text-red-500":"text-green-500"}`,children:el}),!s&&(eu.telegram||eu.instagram)&&(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"text-[10px] text-slate-400 uppercase",children:"Опубликовано:"}),eu.telegram&&(0,a.jsxs)("span",{className:"flex items-center gap-1 rounded-full bg-blue-100 px-2 py-0.5 text-[10px] font-medium text-blue-600 dark:bg-blue-500/20 dark:text-blue-400",children:[(0,a.jsx)(m.A,{size:8}),"TG"]}),eu.instagram&&(0,a.jsxs)("span",{className:"flex items-center gap-1 rounded-full bg-pink-100 px-2 py-0.5 text-[10px] font-medium text-pink-600 dark:bg-pink-500/20 dark:text-pink-400",children:[(0,a.jsx)(h.A,{size:8}),"IG"]})]})]}),Z&&(0,a.jsxs)("div",{className:"rounded-xl border border-purple-200 bg-white dark:border-purple-500/20 dark:bg-slate-900",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-purple-100 px-4 py-3 dark:border-purple-500/10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{size:16,className:"text-purple-500"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-slate-800 dark:text-white",children:"AI-редактор"}),W&&(0,a.jsxs)("span",{className:`rounded-full px-2.5 py-0.5 text-xs font-bold ${W.score>=80?"bg-green-100 text-green-700 dark:bg-green-500/20 dark:text-green-400":W.score>=50?"bg-amber-100 text-amber-700 dark:bg-amber-500/20 dark:text-amber-400":"bg-red-100 text-red-700 dark:bg-red-500/20 dark:text-red-400"}`,children:[W.score,"/100"]})]}),(0,a.jsx)("button",{type:"button",onClick:()=>ee(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-white",children:(0,a.jsx)(g.A,{size:16})})]}),(0,a.jsx)("div",{className:"p-4",children:F?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 py-8",children:[(0,a.jsx)(d.A,{size:20,className:"animate-spin text-purple-500"}),(0,a.jsx)("span",{className:"text-sm text-slate-500",children:"Анализируем статью..."})]}):W?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:W.summary}),W.strengths.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"mb-1.5 flex items-center gap-1 text-xs font-semibold text-green-600 uppercase dark:text-green-400",children:[(0,a.jsx)(k.A,{size:12}),"Сильные стороны"]}),(0,a.jsx)("ul",{className:"space-y-1",children:W.strengths.map((e,t)=>(0,a.jsx)("li",{className:"text-xs text-slate-600 dark:text-slate-400",children:e},t))})]}),W.suggestions.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"mb-1.5 flex items-center gap-1 text-xs font-semibold text-amber-600 uppercase dark:text-amber-400",children:[(0,a.jsx)(y.A,{size:12}),"Рекомендации"]}),(0,a.jsx)("ul",{className:"space-y-2",children:W.suggestions.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start gap-2 text-xs",children:[(0,a.jsx)("span",{className:`mt-0.5 inline-block h-2 w-2 shrink-0 rounded-full ${"high"===e.severity?"bg-red-500":"medium"===e.severity?"bg-amber-500":"bg-blue-500"}`}),(0,a.jsxs)("span",{className:"text-slate-600 dark:text-slate-400",children:[(0,a.jsxs)("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:["title"===e.field?"Заголовок":"excerpt"===e.field?"Описание":"Текст",":"]})," ",e.text]})]},t))})]}),(W.improvedTitle||W.improvedExcerpt||W.improvedBody)&&(0,a.jsxs)("div",{className:"border-t border-slate-100 pt-3 dark:border-slate-800",children:[(0,a.jsxs)("h4",{className:"mb-2 flex items-center gap-1 text-xs font-semibold text-purple-600 uppercase dark:text-purple-400",children:[(0,a.jsx)(f,{size:12}),"Предложенные улучшения"]}),W.improvedTitle&&(0,a.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"flex-1 rounded border border-slate-100 bg-slate-50 px-3 py-1.5 text-xs dark:border-slate-700 dark:bg-slate-800",children:W.improvedTitle}),(0,a.jsx)("button",{type:"button",onClick:()=>ev("title",W.improvedTitle),className:"shrink-0 rounded bg-purple-600 px-2.5 py-1.5 text-xs font-medium text-white hover:bg-purple-700",children:"Заголовок"})]}),W.improvedExcerpt&&(0,a.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"flex-1 rounded border border-slate-100 bg-slate-50 px-3 py-1.5 text-xs dark:border-slate-700 dark:bg-slate-800",children:W.improvedExcerpt}),(0,a.jsx)("button",{type:"button",onClick:()=>ev("excerpt",W.improvedExcerpt),className:"shrink-0 rounded bg-purple-600 px-2.5 py-1.5 text-xs font-medium text-white hover:bg-purple-700",children:"Описание"})]}),W.improvedBody&&(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"flex-1 rounded border border-slate-100 bg-slate-50 px-3 py-1.5 text-xs leading-relaxed dark:border-slate-700 dark:bg-slate-800",children:(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:W.improvedBody}})}),(0,a.jsx)("button",{type:"button",onClick:()=>ev("body",W.improvedBody),className:"shrink-0 rounded bg-purple-600 px-2.5 py-1.5 text-xs font-medium text-white hover:bg-purple-700",children:"Текст"})]})]})]}):null})]}),(0,a.jsxs)("div",{className:"space-y-6 rounded-xl border border-slate-200 bg-white p-6 dark:border-slate-800 dark:bg-slate-900",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 border-b border-slate-200 pb-4 dark:border-slate-700",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-slate-400 uppercase",children:"Язык контента:"}),(0,a.jsx)("div",{className:"flex gap-1",children:S.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>E(e.code),className:`rounded-md px-3 py-1.5 text-xs font-bold transition-colors ${R===e.code?"bg-blue-600 text-white":"text-slate-400 hover:bg-slate-100 hover:text-slate-600 dark:hover:bg-slate-800"}`,children:e.label},e.code))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"mb-1.5 block text-sm font-medium text-slate-700 dark:text-slate-300",children:["Заголовок (",R.toUpperCase(),")"]}),(0,a.jsx)("input",{type:"text",value:n.title[R],onChange:e=>ex("title",e.target.value),placeholder:"Введите заголовок...",className:"w-full rounded-lg border border-slate-200 bg-white px-4 py-3 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none dark:border-slate-700 dark:bg-slate-800 dark:text-white"})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"mb-1.5 flex items-center justify-between text-sm font-medium text-slate-700 dark:text-slate-300",children:[(0,a.jsx)("span",{children:"Slug (URL)"}),I&&(0,a.jsx)("button",{type:"button",onClick:()=>{O(!1),$(e=>({...e,slug:(0,A.Y)(e.title[R])}))},className:"text-xs font-normal text-blue-500 hover:text-blue-700",children:"Сгенерировать из заголовка"})]}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{type:"text",value:n.slug,onChange:e=>{O(!0),$(t=>({...t,slug:e.target.value}))},placeholder:"auto-generated-slug",className:"w-full rounded-lg border border-slate-200 bg-white px-4 py-2.5 font-mono text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none dark:border-slate-700 dark:bg-slate-800 dark:text-white"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1.5 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Категория"}),(0,a.jsx)("select",{value:n.category,onChange:e=>$(t=>({...t,category:e.target.value})),className:"w-full rounded-lg border border-slate-200 bg-white px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none dark:border-slate-700 dark:bg-slate-800 dark:text-white",children:M.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"mb-1.5 block text-sm font-medium text-slate-700 dark:text-slate-300",children:["Краткое описание (",R.toUpperCase(),")"]}),(0,a.jsx)("textarea",{value:n.excerpt[R],onChange:e=>ex("excerpt",e.target.value),rows:2,placeholder:"Краткое описание для карточки и превью...",className:"w-full resize-none rounded-lg border border-slate-200 bg-white px-4 py-3 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none dark:border-slate-700 dark:bg-slate-800 dark:text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"mb-1.5 block text-sm font-medium text-slate-700 dark:text-slate-300",children:["Текст публикации (",R.toUpperCase(),")"]}),(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"flex h-[300px] items-center justify-center rounded-lg border border-slate-200 dark:border-slate-700",children:(0,a.jsx)(d.A,{size:20,className:"animate-spin text-slate-400"})}),children:(0,a.jsx)(z,{value:n.body[R],onChange:e=>ex("body",e),placeholder:"Начните писать текст публикации..."})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1.5 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Обложка"}),n.image?(0,a.jsxs)("div",{className:"group relative inline-block",children:[(0,a.jsx)("img",{src:n.image,alt:"Обложка",className:"h-40 max-w-full rounded-lg border border-slate-200 object-cover dark:border-slate-700"}),(0,a.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center gap-2 rounded-lg bg-black/0 opacity-0 transition-all group-hover:bg-black/40 group-hover:opacity-100",children:[(0,a.jsx)("button",{type:"button",onClick:()=>ej(!0),className:"rounded-lg bg-white/90 px-3 py-1.5 text-xs font-medium text-slate-700 shadow hover:bg-white",children:"Заменить"}),(0,a.jsx)("button",{type:"button",onClick:()=>$(e=>({...e,image:""})),className:"rounded-lg bg-red-500/90 px-3 py-1.5 text-xs font-medium text-white shadow hover:bg-red-600",children:"Удалить"})]})]}):(0,a.jsxs)("button",{type:"button",onClick:()=>ej(!0),className:"flex items-center gap-2 rounded-lg border-2 border-dashed border-slate-300 px-6 py-4 text-sm text-slate-500 transition-colors hover:border-blue-400 hover:text-blue-600 dark:border-slate-600 dark:text-slate-400 dark:hover:border-blue-500 dark:hover:text-blue-400",children:[(0,a.jsx)(j.A,{size:18}),"Загрузить обложку"]}),(0,a.jsx)(r.Suspense,{fallback:null,children:(0,a.jsx)(C,{open:ef,onClose:()=>ej(!1),onInsert:e=>$(t=>({...t,image:e}))})})]}),(0,a.jsxs)("div",{className:"max-w-sm",children:[(0,a.jsx)("label",{className:"mb-1.5 block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Автор"}),(0,a.jsx)("input",{type:"text",value:n.author,onChange:e=>$(t=>({...t,author:e.target.value})),className:"w-full rounded-lg border border-slate-200 bg-white px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none dark:border-slate-700 dark:bg-slate-800 dark:text-white"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 border-t border-slate-200 pt-4 dark:border-slate-700",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>$(e=>({...e,published:!e.published})),className:`flex items-center gap-2 rounded-lg border px-4 py-2 text-sm font-medium transition-colors ${n.published?"border-green-200 bg-green-50 text-green-600 dark:border-green-500/20 dark:bg-green-500/10 dark:text-green-400":"border-slate-200 text-slate-500 hover:border-green-300 dark:border-slate-700"}`,children:[n.published?(0,a.jsx)(v.A,{size:14}):(0,a.jsx)(N.A,{size:14}),n.published?"Опубликовано":"Черновик"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>$(e=>({...e,pinned:!e.pinned})),className:`flex items-center gap-2 rounded-lg border px-4 py-2 text-sm font-medium transition-colors ${n.pinned?"border-amber-200 bg-amber-50 text-amber-600 dark:border-amber-500/20 dark:bg-amber-500/10 dark:text-amber-400":"border-slate-200 text-slate-500 hover:border-amber-300 dark:border-slate-700"}`,children:[(0,a.jsx)(w.A,{size:14}),n.pinned?"Закреплено":"Закрепить"]})]})]})]})}}},e=>{e.O(0,[3399,9675,5334,7358],()=>e(e.s=62782)),_N_E=e.O()}]);