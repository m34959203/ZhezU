(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3980],{3617:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(54917);let r=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),l=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:n="",children:o,iconNode:d,...c},u)=>(0,s.createElement)("svg",{ref:u,...i,width:t,height:t,stroke:e,strokeWidth:l?24*Number(a)/Number(t):a,className:r("lucide",n),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(c)&&{"aria-hidden":"true"},...c},[...d.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(o)?o:[o]])),o=(e,t)=>{let a=(0,s.forwardRef)(({className:a,...i},o)=>(0,s.createElement)(n,{ref:o,iconNode:t,className:r(`lucide-${l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...i}));return a.displayName=l(e),a}},10487:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var s=a(90401),r=a(54917),l=a(56427),i=a(65158),n=a(30892),o=a(38178),d=a(68307);let c=(0,a(3617).A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var u=a(75544);let h={university:"Университет",life:"Студенческая жизнь",academics:"Академические программы",contact:"Контакты",research:"Наука и исследования",admission:"Поступление",aiCenter:"AI-Центр",career:"Карьера"},m=Object.keys(h);function p(){let[e,t]=(0,r.useState)(null),[a,p]=(0,r.useState)(null),[x,b]=(0,r.useState)(!0),[f,k]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[j,v]=(0,r.useState)(null),N=(0,r.useRef)({});async function w(){if(e){k(!0),y(!1);try{(await fetch("/api/admin/section-backgrounds",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&(y(!0),p(JSON.parse(JSON.stringify(e))),setTimeout(()=>y(!1),2e3))}finally{k(!1)}}}function A(a,s){e&&t({...e,backgrounds:{...e.backgrounds,[a]:s}})}async function C(e,t){v(e);try{let a=new FormData;a.append("file",t);let s=await fetch("/api/admin/upload",{method:"POST",body:a});if(s.ok){let{url:t}=await s.json();A(e,t)}}finally{v(null)}}if((0,r.useEffect)(()=>{let e=new AbortController;return fetch("/api/admin/section-backgrounds",{signal:e.signal}).then(e=>e.ok?e.json():null).then(e=>{t(e),p(e?JSON.parse(JSON.stringify(e)):null)}).catch(()=>{}).finally(()=>b(!1)),()=>e.abort()},[]),x||!e)return(0,s.jsx)("div",{className:"flex items-center justify-center py-32",children:(0,s.jsx)(l.A,{size:24,className:"animate-spin text-blue-500"})});let M="rounded-lg border border-slate-200 p-2.5 text-slate-400 transition-colors hover:text-slate-600 dark:border-slate-700 dark:hover:text-white";return(0,s.jsxs)("div",{className:"mx-auto max-w-4xl space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Фоны разделов"}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Укажите URL или загрузите файл фонового изображения для каждого раздела"})]}),(0,s.jsxs)("button",{type:"button",onClick:w,disabled:f,className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2.5 text-sm font-semibold text-white transition-colors hover:bg-blue-700 disabled:opacity-50",children:[f?(0,s.jsx)(l.A,{size:14,className:"animate-spin"}):(0,s.jsx)(i.A,{size:14}),g?"Сохранено!":"Сохранить"]})]}),(0,s.jsx)("div",{className:"space-y-4",children:m.map(r=>{let i=e.backgrounds[r]??"",m=j===r;return(0,s.jsxs)("section",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900",children:[(0,s.jsxs)("div",{className:"relative h-36 bg-slate-100 dark:bg-slate-800",children:[i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:i,alt:h[r],className:"h-full w-full object-cover",onError:e=>{e.target.style.display="none"}}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 to-black/60"}),(0,s.jsx)("span",{className:"absolute bottom-3 left-4 text-sm font-bold text-white drop-shadow",children:h[r]})]}):(0,s.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-2 text-slate-400",children:[(0,s.jsx)(n.A,{size:32}),(0,s.jsx)("span",{className:"text-sm font-medium",children:h[r]}),(0,s.jsx)("span",{className:"text-xs",children:"Нет изображения"})]}),m&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:(0,s.jsx)(l.A,{size:28,className:"animate-spin text-white"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 p-4",children:[(0,s.jsx)("input",{type:"url",value:i,onChange:e=>A(r,e.target.value),placeholder:"https://images.unsplash.com/photo-...",className:"flex-1 rounded-lg border border-slate-200 bg-white px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none dark:border-slate-700 dark:bg-slate-800 dark:text-white"}),(0,s.jsx)("input",{ref:e=>{N.current[r]=e},type:"file",accept:"image/jpeg,image/png,image/webp",className:"hidden",onChange:e=>{let t=e.target.files?.[0];t&&C(r,t),e.target.value=""}}),(0,s.jsx)("button",{type:"button",onClick:()=>N.current[r]?.click(),disabled:m,title:"Загрузить файл",className:`${M} hover:border-blue-300 hover:text-blue-600 dark:hover:text-blue-400`,children:(0,s.jsx)(o.A,{size:14})}),i&&(0,s.jsx)("a",{href:i,target:"_blank",rel:"noopener noreferrer",title:"Открыть в новой вкладке",className:M,children:(0,s.jsx)(d.A,{size:14})}),(0,s.jsx)("button",{type:"button",onClick:()=>{e&&a&&t({...e,backgrounds:{...e.backgrounds,[r]:a.backgrounds[r]??""}})},title:"Сбросить к сохранённому",className:M,children:(0,s.jsx)(c,{size:14})}),(0,s.jsx)("button",{type:"button",onClick:()=>{e&&t({...e,backgrounds:{...e.backgrounds,[r]:""}})},title:"Удалить фон",className:`${M} hover:border-red-300 hover:text-red-500 dark:hover:text-red-400`,children:(0,s.jsx)(u.A,{size:14})})]})]},r)})})]})}},26072:(e,t,a)=>{Promise.resolve().then(a.bind(a,10487))},30892:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},38178:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},56427:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},65158:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},68307:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},75544:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])}},e=>{e.O(0,[9675,5334,7358],()=>e(e.s=26072)),_N_E=e.O()}]);