(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720],{698:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]])},3617:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(4917);let r=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),l=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:i="",children:d,iconNode:c,...o},u)=>(0,s.createElement)("svg",{ref:u,...n,width:t,height:t,stroke:e,strokeWidth:l?24*Number(a)/Number(t):a,className:r("lucide",i),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(o)&&{"aria-hidden":"true"},...o},[...c.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(d)?d:[d]])),d=(e,t)=>{let a=(0,s.forwardRef)(({className:a,...n},d)=>(0,s.createElement)(i,{ref:d,iconNode:t,className:r(`lucide-${l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...n}));return a.displayName=l(e),a}},5447:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5544:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},6427:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6499:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},7404:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8032:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var s=a(401),r=a(4917),l=a(5386),n=a.n(l),i=a(6499),d=a(5447),c=a(6427),o=a(698),u=a(8591);let h=(0,a(3617).A)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var x=a(9103),p=a(7404),m=a(5544);let b=[{value:"",label:"Все"},{value:"news",label:"Новости"},{value:"announcement",label:"Объявления"},{value:"event",label:"События"},{value:"achievement",label:"Достижения"},{value:"university",label:"Университет"},{value:"science",label:"Наука"},{value:"students",label:"Студенты"},{value:"sport",label:"Спорт"},{value:"culture",label:"Культура"}],y={news:"bg-blue-500/10 text-blue-400 border-blue-500/20",announcement:"bg-amber-500/10 text-amber-400 border-amber-500/20",event:"bg-emerald-500/10 text-emerald-400 border-emerald-500/20",achievement:"bg-purple-500/10 text-purple-400 border-purple-500/20",university:"bg-indigo-500/10 text-indigo-400 border-indigo-500/20",science:"bg-cyan-500/10 text-cyan-400 border-cyan-500/20",students:"bg-green-500/10 text-green-400 border-green-500/20",sport:"bg-orange-500/10 text-orange-400 border-orange-500/20",culture:"bg-pink-500/10 text-pink-400 border-pink-500/20"};async function g(e){let t=await fetch("/api/admin/news",{signal:e});return t.ok?t.json():[]}function v(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[v,f]=(0,r.useState)(""),[k,j]=(0,r.useState)(""),[N,w]=(0,r.useState)(null),[A,C]=(0,r.useReducer)(e=>e+1,0);async function z(e){await fetch(`/api/admin/news/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({published:!e.published})}),C()}async function M(e){await fetch(`/api/admin/news/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({pinned:!e.pinned})}),C()}async function $(e){confirm("Удалить публикацию?")&&(w(e),await fetch(`/api/admin/news/${e}`,{method:"DELETE"}),C(),w(null))}(0,r.useEffect)(()=>{let e=new AbortController;return g(e.signal).then(t).catch(()=>{}).finally(()=>l(!1)),()=>e.abort()},[A]);let E=e.filter(e=>{let t=e.title.ru.toLowerCase().includes(v.toLowerCase()),a=!k||e.category===k;return t&&a});return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(i.A,{size:16,className:"absolute top-1/2 left-3 -translate-y-1/2 text-slate-400"}),(0,s.jsx)("input",{type:"text",value:v,onChange:e=>f(e.target.value),placeholder:"Поиск по заголовку...",className:"w-full rounded-lg border border-slate-200 bg-white py-2.5 pr-4 pl-10 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none dark:border-slate-700 dark:bg-slate-800 dark:text-white"})]}),(0,s.jsx)("div",{className:"flex gap-1 rounded-lg border border-slate-200 bg-white p-1 dark:border-slate-700 dark:bg-slate-800",children:b.map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>j(e.value),className:`rounded-md px-3 py-1.5 text-xs font-medium transition-colors ${k===e.value?"bg-blue-600 text-white":"text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white"}`,children:e.label},e.value))}),(0,s.jsxs)(n(),{href:"/admin/news/new",className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2.5 text-sm font-semibold text-white transition-colors hover:bg-blue-700",children:[(0,s.jsx)(d.A,{size:16}),"Создать"]})]}),(0,s.jsx)("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-900",children:a?(0,s.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,s.jsx)(c.A,{size:24,className:"animate-spin text-blue-500"})}):0===E.length?(0,s.jsx)("div",{className:"py-16 text-center text-sm text-slate-400",children:v||k?"Ничего не найдено":"Нет публикаций"}):(0,s.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,s.jsx)("thead",{className:"border-b border-slate-100 text-xs text-slate-500 uppercase dark:border-slate-800 dark:text-slate-400",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 font-medium",children:"Заголовок"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Категория"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Статус"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Дата"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Действия"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:E.map(e=>(0,s.jsxs)("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[(0,s.jsxs)("td",{className:"max-w-xs px-6 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"truncate font-medium text-slate-900 dark:text-white",children:e.title.ru}),e.pinned&&(0,s.jsx)(o.A,{size:12,className:"shrink-0 text-amber-500"})]}),(0,s.jsx)("p",{className:"mt-0.5 truncate text-xs text-slate-400",children:e.excerpt.ru})]}),(0,s.jsx)("td",{className:"px-4 py-4",children:(0,s.jsx)("span",{className:`rounded-full border px-2.5 py-1 text-[10px] font-semibold ${y[e.category]}`,children:b.find(t=>t.value===e.category)?.label})}),(0,s.jsx)("td",{className:"px-4 py-4",children:(0,s.jsxs)("span",{className:`inline-flex items-center gap-1.5 text-xs font-medium ${e.published?"text-green-500":"text-slate-400"}`,children:[(0,s.jsx)("span",{className:`h-1.5 w-1.5 rounded-full ${e.published?"bg-green-500":"bg-slate-300 dark:bg-slate-600"}`}),e.published?"Опубликовано":"Черновик"]})}),(0,s.jsx)("td",{className:"px-4 py-4 text-xs text-slate-400",children:(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(u.A,{size:10}),new Date(e.createdAt).toLocaleDateString("ru-RU")]})}),(0,s.jsx)("td",{className:"px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(n(),{href:`/admin/news/${e.id}`,className:"rounded-lg p-1.5 text-slate-400 transition-colors hover:bg-blue-50 hover:text-blue-500 dark:hover:bg-blue-500/10",title:"Редактировать",children:(0,s.jsx)(h,{size:14})}),(0,s.jsx)("button",{type:"button",onClick:()=>z(e),className:"rounded-lg p-1.5 text-slate-400 transition-colors hover:bg-emerald-50 hover:text-emerald-500 dark:hover:bg-emerald-500/10",title:e.published?"Снять с публикации":"Опубликовать",children:e.published?(0,s.jsx)(x.A,{size:14}):(0,s.jsx)(p.A,{size:14})}),(0,s.jsx)("button",{type:"button",onClick:()=>M(e),className:`rounded-lg p-1.5 transition-colors hover:bg-amber-50 dark:hover:bg-amber-500/10 ${e.pinned?"text-amber-500":"text-slate-400 hover:text-amber-500"}`,title:e.pinned?"Открепить":"Закрепить",children:(0,s.jsx)(o.A,{size:14})}),(0,s.jsx)("button",{type:"button",onClick:()=>$(e.id),disabled:N===e.id,className:"rounded-lg p-1.5 text-slate-400 transition-colors hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-500/10",title:"Удалить",children:N===e.id?(0,s.jsx)(c.A,{size:14,className:"animate-spin"}):(0,s.jsx)(m.A,{size:14})})]})})]},e.id))})]})})]})}},8172:(e,t,a)=>{Promise.resolve().then(a.bind(a,8032))},8591:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},9103:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(3617).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])}},e=>{e.O(0,[5386,9675,5334,7358],()=>e(e.s=8172)),_N_E=e.O()}]);