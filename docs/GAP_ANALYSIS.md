# GAP-анализ: ZhezU — Текущее состояние vs Техническое задание v1.0

**Дата:** 23.02.2026
**Версия:** 1.0
**Автор:** Технический аудит
**Проект:** Веб-сайт Жезказганского университета имени О.А. Байконурова

---

## 1. Резюме (Executive Summary)

### Общая готовность: ~12-15%

Проект ZhezU находится на стадии **раннего прототипа**. Существует визуальная оболочка с 8 страницами и 16 UI-компонентами, но отсутствует практически вся серверная часть, инфраструктура, интеграции, тестирование и система управления контентом.

### Ключевые выводы

1. **Фронтенд-каркас существует, но без бэкенда.** Все данные захардкожены в TypeScript-файлах (`constants.ts`, `lifecycle-data.ts`, `talapker-data.ts`, `talent-data.ts`). Ни одного реального API-эндпоинта (кроме `/api/health`). Нет ни базы данных, ни CMS, ни кеширования.

2. **Нулевое покрытие тестами.** В проекте 0 тестовых файлов, не установлен ни один тестовый фреймворк (ни Jest, ни Playwright, ни axe-core). ТЗ требует >= 80% unit-покрытия, E2E, визуальную регрессию, accessibility и security-тесты.

3. **Нулевая интеграция.** ТЗ требует 10+ интеграций (CRM, LMS, Google Calendar, платежные системы, SSO, Scopus/WoS, библиотека и т.д.). Реализовано: 0.

4. **Инфраструктура минимальна.** Есть Dockerfile и railway.toml — этого достаточно для деплоя прототипа, но ТЗ требует PostgreSQL, Redis, Meilisearch, S3, CDN, Kubernetes, CI/CD, мониторинг (Sentry + Grafana). Ничего из этого нет.

5. **Безопасность отсутствует полностью.** Нет аутентификации, нет CSP-заголовков, нет WAF, нет TLS-конфигурации, нет RBAC. ТЗ требует SSO, 2FA, пентесты, OWASP ZAP.

6. **i18n частично реализована.** 3 локали (kk/ru/en) работают через next-intl, URL-структура `/{locale}/` присутствует. Но нет hreflang-тегов, нет Schema.org разметки, нет SEO-оптимизации.

7. **Страницы, требуемые ТЗ, в значительной степени отсутствуют.** Нет каталога программ с фасетной фильтрацией, нет многошаговой формы поступления, нет новостной ленты, нет календаря событий, нет виртуального тура, нет личного кабинета, нет AI-чатбота.

### Объем недостающей работы

| Категория | Готовность | Комментарий |
|-----------|-----------|-------------|
| Фронтенд (MVP-страницы) | ~20% | Есть каркас, но функционал поверхностный |
| Headless CMS | 0% | Не развернут, не настроен |
| База данных | 0% | Нет PostgreSQL, нет схемы |
| API-слой | ~2% | Только health check |
| Интеграции | 0% | 0 из 10+ |
| Тестирование | 0% | 0 файлов, 0 фреймворков |
| CI/CD | 0% | Нет GitHub Actions |
| Безопасность | ~5% | Только `poweredByHeader: false` |
| i18n / SEO | ~30% | Локали есть, hreflang и Schema.org нет |
| Инфраструктура | ~10% | Dockerfile есть, всего остального нет |
| Мониторинг | 0% | Нет Sentry, нет Grafana |

---

## 2. Матрица разрывов (Gap Matrix)

### 2.1 Функциональные требования — MVP (Фаза 1)

| ID | Требование | Статус | Описание разрыва | Приоритет | Трудоемкость |
|----|-----------|--------|-------------------|-----------|-------------|
| FR-001 | Hero-блок с видео/слайдером, управляемый через CMS | **Частично** | Hero-секция существует на главной (статичное фоновое изображение Unsplash). Нет видео, нет слайдера, нет CMS-управления. Изображение захардкожено в JSX. | Высокий | M |
| FR-002 | Ролевые быстрые ссылки (Абитуриент, Студент, Сотрудник, Выпускник) | **Отсутствует** | На главной нет блока быстрых ссылок по ролям. Есть только общая навигация (Home, Admission, Academics и т.д.). | Средний | S |
| FR-003 | Анимированные счетчики (студенты, программы, рейтинги) | **Частично** | Блок статистики существует (students, programs, employment, years) в секции «Floating Stats». Но счетчики **не анимированы** — отображаются как статичный текст. Данные захардкожены в `constants.ts`. | Низкий | S |
| FR-004 | Блок новостей (3-4 последних из CMS API) | **Отсутствует** | Нет новостной страницы, нет API для новостей, нет CMS. Полностью отсутствует. | Высокий | L |
| FR-005 | Блок событий (интеграция с Google Calendar) | **Отсутствует** | Нет календаря событий, нет интеграции с Google Calendar API. | Высокий | L |
| FR-010 | Каталог программ с lazy loading | **Частично** | Страница `/academics` существует. Программы отображаются в таблицах по кафедрам. Но: нет lazy loading, нет пагинации, данные из `constants.ts` (22 программы захардкожены). | Высокий | M |
| FR-011 | Фасетная фильтрация (уровень, направление, язык, формат, стоимость) — AJAX | **Частично** | Есть текстовый поиск по названию/коду/описанию на странице Academics. Но: нет фильтрации по уровню, направлению, языку, формату, стоимости. Нет AJAX — все клиентское. | Высокий | M |
| FR-012 | Сортировка (имя, популярность, дата) с сохранением в URL | **Отсутствует** | Нет сортировки. Нет URL-персистентности параметров (query params). | Средний | S |
| FR-013 | Детальная страница программы (аккордеон учебного плана, Schema.org Course) | **Отсутствует** | Нет отдельных страниц программ (`/academics/[slug]`). Нет Schema.org Course разметки. Нет аккордеона учебного плана. | Высокий | M |
| FR-020 | Многошаговая форма поступления (5 шагов, auto-save, CRM-интеграция) | **Отсутствует** | Страница `/admission` существует, но это **информационная страница** — нет формы, нет шагов, нет auto-save, нет CRM. Есть только визуальное представление 4 шагов процесса поступления (текст). | Критический | XL |
| FR-021 | Inline-валидация (email, phone, IIN) | **Отсутствует** | `react-hook-form` и `zod` установлены в зависимостях, но **нигде не используются** в коде. Ни одной формы в проекте нет. | Высокий | M |
| FR-022 | Загрузка документов (drag-drop, 10MB, preview) | **Отсутствует** | Нет компонента загрузки файлов. Нет S3/файлового хранилища. | Высокий | M |
| FR-023 | CRM-интеграция (Salesforce/HubSpot, webhook) | **Отсутствует** | Нет никакой интеграции с внешними системами. | Высокий | L |
| FR-030 | Новостная лента с фильтрами по категории/тегу | **Отсутствует** | Нет страницы новостей, нет API, нет CMS-контента. | Высокий | L |
| FR-031 | Детальная страница новости (rich text из CMS, Schema.org Article) | **Отсутствует** | Полностью отсутствует. | Высокий | M |
| FR-032 | Календарь событий (месяц/неделя/список, подписка Google Calendar) | **Отсутствует** | Полностью отсутствует. | Средний | L |
| FR-050 | Headless CMS (Strapi 5 / Payload CMS, REST + GraphQL) | **Отсутствует** | Нет CMS. Все данные захардкожены в `.ts` файлах. Это **блокирующий разрыв** — без CMS невозможно реализовать FR-001, FR-004, FR-030, FR-031. | Критический | XL |
| FR-051 | Роли CMS (Superadmin, Editor, Author, Faculty content manager) | **Отсутствует** | Нет CMS = нет ролей. | Высокий | M |
| FR-052 | Workflow публикации (Draft -> Review -> Published -> Archive) | **Отсутствует** | Нет CMS = нет workflow. | Высокий | M |
| FR-054 | Режим Preview с расшариваемыми ссылками | **Отсутствует** | Нет draft mode в Next.js, нет preview API. | Средний | M |
| FR-055 | Оптимизация медиа (WebP/AVIF авто-конвертация, lazy loading) | **Частично** | Next.js Image Optimization настроен в `next.config.ts` (remotePatterns для Unsplash и Google). Но: нет автоматической конвертации в WebP/AVIF на стороне CMS, нет S3-хранилища для медиа. Компонент `<Image>` из Next.js не используется в `page.tsx` — вместо этого `bg-[url(...)]` в CSS. | Средний | M |
| FR-060 | Полная поддержка 3 языков | **Частично** | 3 локали настроены (kk/ru/en). 310 ключей переводов в каждом файле. `next-intl` 4.8.2 интегрирован. Однако: не все страницы полностью локализованы (на странице Admission захардкожены русские строки «МОН РК лицензия», «IQAA аккредитация», «Гос. грант»). | Средний | M |
| FR-061 | URL-структура /kz/ /ru/ /en/ | **Частично** | Middleware настроен с matcher `/(kk|ru|en)/:path*`. URL-структура работает. Но используется `/kk/`, а ТЗ требует `/kz/`. Потенциально нужна замена кода локали. | Низкий | S |
| FR-063 | Переключатель языка с сохранением текущей страницы | **Готово** | `LanguageSwitcher` компонент существует, использует `usePathname` и `useRouter` из `next-intl`. | — | — |
| FR-064 | Теги hreflang | **Отсутствует** | Нет hreflang-тегов в `<head>`. Не настроены ни в layout, ни в middleware. | Высокий | S |

### 2.2 Функциональные требования — Фаза 2

| ID | Требование | Статус | Описание разрыва | Приоритет | Трудоемкость |
|----|-----------|--------|-------------------|-----------|-------------|
| FR-006 | Карусель отзывов | **Отсутствует** | Нет компонента карусели, нет данных отзывов. | Низкий | S |
| FR-024 | Email+SMS уведомления | **Отсутствует** | Нет SendGrid/SMS-провайдера. Нет бэкенда для отправки. | Средний | L |
| FR-025 | Калькулятор стипендий | **Отсутствует** | Нет формулы расчета, нет UI. | Низкий | M |
| FR-026 | FAQ с AI-поиском | **Отсутствует** | Нет FAQ-страницы, нет AI-интеграции. | Низкий | L |
| FR-033 | Email-подписка (double opt-in) | **Отсутствует** | Нет формы подписки, нет бэкенда, нет почтового сервиса. | Низкий | M |
| FR-040 | 360-панорамы (10-15 точек) | **Отсутствует** | Нет панорамного просмотрщика, нет контента. | Средний | XL |
| FR-041 | Интерактивные hotspots | **Отсутствует** | Связано с FR-040. | Средний | L |
| FR-042 | Карта кампуса (Google Maps) | **Отсутствует** | Нет Google Maps интеграции. На странице Contact есть только текстовый адрес. | Средний | M |
| FR-053 | Версионирование контента | **Отсутствует** | Нет CMS = нет версионирования. | Низкий | M |
| FR-070 | SSO (SAML 2.0 / OAuth 2.0 / OIDC) | **Отсутствует** | Нет аутентификации. Вообще никакой. | Высокий | XL |
| FR-071 | Личный кабинет студента (расписание, оценки из LMS) | **Отсутствует** | Нет аутентификации, нет LMS-интеграции, нет dashboard. | Высокий | XL |
| FR-072 | Настройки профиля пользователя | **Отсутствует** | Нет пользователей. | Средний | M |
| FR-073 | 2FA для CMS-администраторов | **Отсутствует** | Нет CMS, нет аутентификации. | Высокий | M |
| FR-080 | AI-чатбот (3 языка) | **Отсутствует** | Нет AI-интеграции, нет чатбот-компонента. | Средний | XL |
| FR-081 | Эскалация чата на оператора | **Отсутствует** | Нет чата, нет Intercom/Zendesk. | Низкий | L |

### 2.3 Нефункциональные требования

| ID | Требование | Статус | Описание разрыва | Приоритет | Трудоемкость |
|----|-----------|--------|-------------------|-----------|-------------|
| NFR-01 | LCP <= 2.5s | **Не проверено** | Нет Lighthouse CI, нет замеров. Hero-секция использует внешнее Unsplash-изображение через CSS `bg-[url()]` — вероятно LCP > 2.5s без CDN и оптимизации. | Высокий | M |
| NFR-02 | FID <= 100ms | **Не проверено** | Без нагрузочного тестирования невозможно подтвердить. Framer Motion может влиять на FID. | Средний | S |
| NFR-03 | CLS <= 0.1 | **Не проверено** | Нет замеров. Отсутствие `<Image>` компонента с заданными размерами может вызывать layout shift. | Средний | S |
| NFR-04 | TTFB <= 200ms | **Не проверено** | Railway-деплой без CDN. TTFB зависит от геолокации пользователя и серверной нагрузки. Без Redis-кеширования — вероятно > 200ms. | Высокий | L |
| NFR-05 | Lighthouse >= 90 | **Не проверено** | Нет Lighthouse CI. Предположительно 60-75 из-за отсутствия SEO-мета, accessibility, image optimization. | Высокий | L |
| NFR-07 | 10,000 concurrent users | **Не проверено** | Нет нагрузочного тестирования. Один контейнер на Railway без горизонтального масштабирования. Точно не выдержит 10K. | Критический | XL |
| NFR-09 | WCAG 2.2 AA 100% | **Частично** | `aria-label` и `aria-current` используются в Header. Но: нет систематической проверки, нет skip-links, нет focus-management, не проверены контрасты, нет axe-core тестов. | Высокий | L |
| NFR-13 | HTTPS/TLS 1.3 | **Частично** | Railway предоставляет HTTPS автоматически. Но: нет контроля версии TLS, нет HSTS-заголовков. | Средний | S |
| NFR-14 | CSP headers | **Отсутствует** | Нет Content-Security-Policy. Нет security headers. `poweredByHeader: false` — единственная мера безопасности. | Высокий | M |
| NFR-15 | WAF/DDoS защита | **Отсутствует** | Нет Cloudflare, нет WAF. Railway не предоставляет WAF из коробки. | Высокий | L |
| NFR-17 | Penetration testing | **Отсутствует** | Нет OWASP ZAP, нет security-аудита. | Высокий | L |
| NFR-19 | 99.5% uptime | **Частично** | Railway обеспечивает базовый uptime. Но: нет мониторинга, нет alerting, нет multi-region, нет Kubernetes. Healthcheck настроен в `railway.toml`. | Средний | L |
| NFR-25 | SEO Score >= 95 | **Частично** | Базовый SEO: Next.js SSR/SSG, URL-структура с локалями. Но: нет sitemap.xml, нет robots.txt (кастомного), нет Schema.org, нет hreflang, нет мета-тегов для OpenGraph/Twitter, нет canonical URLs. | Высокий | M |
| NFR-26 | Schema.org structured data | **Отсутствует** | Нет ни одного JSON-LD скрипта. Нет Schema.org Course, Article, Organization, BreadcrumbList. | Высокий | M |

---

## 3. Анализ разрывов по компонентам (Component Gap Analysis)

### 3.1 Существующие компоненты (16 шт.)

| Компонент | Путь | Соответствие ТЗ | Замечания |
|-----------|------|-----------------|-----------|
| Button | `src/components/ui/Button.tsx` | Годен | Базовый, можно использовать |
| Card | `src/components/ui/Card.tsx` | Годен | С поддержкой image, hover, glow |
| Badge | `src/components/ui/Badge.tsx` | Годен | Базовый |
| Input | `src/components/ui/Input.tsx` | Требует доработки | Не интегрирован с react-hook-form, нет валидации |
| Header | `src/components/layout/Header.tsx` | Требует доработки | Нет ролевых быстрых ссылок (FR-002), нет поисковой функции |
| Footer | `src/components/layout/Footer.tsx` | Годен с доработкой | Нужна SEO-оптимизация |
| ThemeToggle | `src/components/layout/ThemeToggle.tsx` | Годен | Работает |
| LanguageSwitcher | `src/components/layout/LanguageSwitcher.tsx` | Годен | Сохраняет текущую страницу (FR-063) |
| MobileMenu | `src/components/layout/MobileMenu.tsx` | Годен с доработкой | Нужно обновить навигацию при добавлении страниц |
| StudentCard | `src/components/talent/StudentCard.tsx` | Не в ТЗ | Специфичен для Talent Pool — не требуется в ТЗ |
| ProgressBar | `src/components/talent/ProgressBar.tsx` | Частично | Может использоваться для прогресса формы (FR-020) |
| SkillMap | `src/components/talent/SkillMap.tsx` | Не в ТЗ | Не требуется в ТЗ |
| CircularProgress | `src/components/talent/CircularProgress.tsx` | Не в ТЗ | Может пригодиться для dashboard |
| RadarChart | `src/components/talent/RadarChart.tsx` | Не в ТЗ | Не требуется в ТЗ |
| ThemeProvider | `src/components/providers/ThemeProvider.tsx` | Годен | Работает |
| StudentProfileView | `src/components/StudentProfileView.tsx` | Не в ТЗ | Не требуется в ТЗ |

### 3.2 Компоненты, которые НЕОБХОДИМО создать

| Компонент | Для какого требования | Приоритет | Трудоемкость |
|-----------|----------------------|-----------|-------------|
| HeroSlider / VideoHero | FR-001 | Высокий | M |
| RoleQuickLinks | FR-002 | Средний | S |
| AnimatedCounter | FR-003 | Низкий | S |
| NewsCard / NewsFeed | FR-004, FR-030 | Высокий | M |
| EventCalendar | FR-005, FR-032 | Высокий | L |
| ProgramCatalog (с фильтрами) | FR-010, FR-011, FR-012 | Высокий | L |
| ProgramDetail (аккордеон) | FR-013 | Высокий | M |
| MultiStepForm | FR-020 | Критический | XL |
| FormStepIndicator | FR-020 | Высокий | S |
| FileUpload (drag-drop) | FR-022 | Высокий | M |
| InlineValidator | FR-021 | Высокий | M |
| RichTextRenderer | FR-031 | Высокий | M |
| TestimonialCarousel | FR-006 | Низкий | S |
| ScholarshipCalculator | FR-025 | Низкий | M |
| FAQAccordion + AISearch | FR-026 | Низкий | L |
| EmailSubscribeForm | FR-033 | Низкий | S |
| PanoramaViewer | FR-040 | Средний | XL |
| CampusMap | FR-042 | Средний | M |
| UserDashboard | FR-071 | Высокий | XL |
| UserProfileSettings | FR-072 | Средний | M |
| ChatBot | FR-080 | Средний | XL |
| ChatWidget | FR-081 | Средний | L |
| SchemaJsonLd | NFR-26 | Высокий | M |
| Breadcrumbs | NFR-25/SEO | Средний | S |
| SkipLink | NFR-09/A11y | Средний | S |
| SearchModal (глобальный) | FR-011 | Средний | M |

**Итого:** 16 компонентов годны с доработкой, нужно создать ~26 новых компонентов.

---

## 4. Анализ разрывов инфраструктуры (Infrastructure Gap Analysis)

### 4.1 Что существует

| Элемент | Текущее состояние | Замечания |
|---------|------------------|-----------|
| Docker | Dockerfile (Node 22 Alpine, multi-stage build) | Хорошо написан, standalone output |
| Railway | railway.toml с healthcheck | Базовый деплой, нет auto-scaling |
| pnpm | pnpm-lock.yaml, pnpm-workspace.yaml | Монорепо готово |
| Next.js config | `next.config.ts` с standalone, compress, remotePatterns | Базовая настройка |
| Healthcheck | `GET /api/health` возвращает status, timestamp, uptime | Минимальный |

### 4.2 Что НЕОБХОДИМО, но ОТСУТСТВУЕТ

| Элемент | Требование ТЗ | Текущее состояние | Приоритет | Трудоемкость |
|---------|--------------|------------------|-----------|-------------|
| **PostgreSQL 16** | База данных для CMS, пользователей, форм | Нет. Все данные в `.ts` файлах | Критический | L |
| **Redis 7** | Кеширование, сессии, rate limiting | Нет | Высокий | M |
| **Meilisearch / Algolia** | Полнотекстовый поиск по сайту | Нет | Высокий | L |
| **S3-совместимое хранилище** | Медиа-файлы, загруженные документы (FR-022) | Нет. Изображения — внешние URL Unsplash | Высокий | M |
| **CDN (Cloudflare)** | Кеширование статики, WAF, DDoS-защита | Нет. Railway без CDN | Высокий | M |
| **CI/CD (GitHub Actions)** | Автоматический build, test, deploy | Нет `.github/workflows/`. Деплой только через Railway auto-deploy | Критический | L |
| **Мониторинг (Sentry)** | Error tracking, performance monitoring | Нет. Нет даже error boundary в React | Высокий | M |
| **Мониторинг (Grafana)** | Dashboards, метрики, alerting | Нет | Средний | L |
| **Kubernetes** | Оркестрация, auto-scaling, rolling updates | Нет. Один контейнер на Railway | Высокий | XL |
| **Docker Compose** | Локальная разработка с PostgreSQL, Redis | Нет. Только Dockerfile для прода | Средний | S |
| **Nginx / Reverse Proxy** | Load balancing, SSL termination | Нет | Средний | M |
| **Backup система** | Бэкапы БД, медиа | Нет | Высокий | M |

### 4.3 Разрыв в миграции от текущей к целевой архитектуре

```
ТЕКУЩЕЕ СОСТОЯНИЕ:                    ЦЕЛЕВОЕ СОСТОЯНИЕ (ТЗ):

[Next.js App] ─── hardcoded data      [Next.js App]
      │                                     │
[Railway] ── single container          [Cloudflare CDN]
                                            │
                                       [Kubernetes Cluster]
                                       ┌────┴────┐
                                       │         │
                                  [Next.js]  [Strapi/Payload CMS]
                                       │         │
                                  [Redis]    [PostgreSQL]
                                       │         │
                                  [Meilisearch] [S3 Storage]
                                       │
                                  [Sentry + Grafana]
```

**Вывод:** Архитектурный разрыв колоссальный. Необходим полный рефакторинг инфраструктуры.

---

## 5. Анализ разрывов интеграций (Integration Gap Analysis)

**Текущее состояние: 0 интеграций из 10+ требуемых.**

| Интеграция | Требование ТЗ | Статус | Приоритет (MVP) | Трудоемкость |
|-----------|--------------|--------|-----------------|-------------|
| **Headless CMS** (Strapi 5 / Payload CMS) | FR-050 | Отсутствует | Критический | XL |
| **CRM** (Salesforce / HubSpot) | FR-023 | Отсутствует | Высокий | L |
| **Google Calendar API** | FR-005, FR-032 | Отсутствует | Высокий | L |
| **Email-сервис** (SendGrid) | FR-024, FR-033 | Отсутствует | Средний | M |
| **Google Maps** | FR-042 | Отсутствует | Средний | M |
| **Платежные системы** (Kaspi Pay) | Фаза 2 | Отсутствует | Низкий | XL |
| **University SSO / LDAP** | FR-070 | Отсутствует | Высокий (Фаза 2) | XL |
| **LMS** (Moodle, LTI 1.3) | FR-071 | Отсутствует | Высокий (Фаза 2) | XL |
| **Scopus / Web of Science** | Фаза 2 | Отсутствует | Низкий | L |
| **Библиотечная система** | Фаза 2 | Отсутствует | Низкий | L |
| **Intercom / Zendesk** | FR-081 | Отсутствует | Низкий | M |

### Блокирующие зависимости

```
CMS (FR-050)  ─ блокирует ─→  FR-001, FR-004, FR-030, FR-031, FR-051, FR-052, FR-054
PostgreSQL    ─ блокирует ─→  FR-050, FR-020, FR-070, FR-071
SSO (FR-070)  ─ блокирует ─→  FR-071, FR-072, FR-073
CRM (FR-023)  ─ блокирует ─→  FR-020 (полностью)
```

**Вывод:** CMS и база данных — фундаментальные блокеры. Без них 60%+ требований ТЗ невозможно реализовать в принципе.

---

## 6. Анализ разрывов тестирования (Testing Gap Analysis)

### Текущее состояние: НУЛЕВОЕ

- 0 тестовых файлов (ни `*.test.ts`, ни `*.spec.ts`)
- 0 тестовых фреймворков в `package.json`
- Нет скрипта `test` в `package.json`
- Нет конфигурации Jest/Vitest
- Нет конфигурации Playwright
- Нет `.github/workflows/` для запуска тестов

### Требования ТЗ vs Реальность

| Тип тестирования | Требование ТЗ | Текущее состояние | Трудоемкость настройки | Трудоемкость написания |
|-----------------|--------------|------------------|----------------------|----------------------|
| **Unit-тесты** | Jest, >= 80% coverage | Нет Jest/Vitest. 0% coverage. | S (настройка) | XL (написание) |
| **E2E-тесты** | Playwright | Нет Playwright. 0 тестов. | S (настройка) | L (написание) |
| **Visual regression** | Chromatic | Нет Storybook, нет Chromatic. | L (Storybook + Chromatic) | L (stories) |
| **Performance** | Lighthouse CI | Нет Lighthouse CI. | M (настройка CI) | S (конфигурация) |
| **Accessibility** | axe-core | Нет axe-core. | S (настройка) | M (написание) |
| **Security** | OWASP ZAP | Нет. | M (настройка) | L (сканирование + исправления) |
| **Нагрузочное** | 10K concurrent | Нет k6/Artillery. | M (настройка) | L (сценарии + оптимизация) |

### Оценка трудоемкости достижения 80% unit-покрытия

При текущих ~40 файлах (`.ts` + `.tsx`) и оценке ~2-4 тестовых файла на каждый:

- **Компоненты (16):** ~48-64 тест-кейса = 1-2 недели
- **Утилиты/lib (6 файлов):** ~30-50 тест-кейсов = 3-5 дней
- **API-эндпоинты (1+будущие):** ~20-40 тест-кейсов = 1 неделя
- **Хуки (1+будущие):** ~10-20 тест-кейсов = 2-3 дня
- **E2E сценарии:** ~15-25 сценариев = 2 недели

**Итого на полное тестовое покрытие: ~6-8 недель** (с учетом кода, который будет написан для MVP).

---

## 7. Оценка рисков (Risk Assessment)

### Критические риски (блокируют запуск проекта)

| # | Риск | Вероятность | Влияние | Описание | Митигация |
|---|------|------------|---------|----------|-----------|
| R1 | **Отсутствие CMS блокирует весь контент** | 100% | Критическое | Без CMS редакторы не могут публиковать новости, обновлять программы, управлять медиа. Весь контент захардкожен. | Начать с развертывания Strapi 5 / Payload CMS в первую очередь. |
| R2 | **Отсутствие БД блокирует формы и авторизацию** | 100% | Критическое | Без PostgreSQL невозможна форма поступления (FR-020), SSO (FR-070), личные кабинеты (FR-071). | Развернуть PostgreSQL 16 параллельно с CMS. |
| R3 | **0% тестового покрытия = непредсказуемое качество** | 100% | Высокое | Любое изменение кода может сломать существующий функционал. Нет CI/CD для ловли регрессий. | Настроить Jest + Playwright до начала активной разработки. |
| R4 | **Нет горизонтального масштабирования** | Высокая | Критическое | Один контейнер на Railway не выдержит 10K concurrent пользователей (NFR-07). Приемная кампания = пиковая нагрузка. | Мигрировать на Kubernetes или как минимум настроить auto-scaling. |

### Высокие риски

| # | Риск | Вероятность | Влияние | Описание | Митигация |
|---|------|------------|---------|----------|-----------|
| R5 | **Отсутствие security headers** | 100% | Высокое | Нет CSP, HSTS, X-Frame-Options. Уязвимость для XSS, clickjacking. | Добавить middleware для security headers. |
| R6 | **Захардкоженные данные = невозможность обновления** | 100% | Высокое | 22 программы, статистика, контакты — всё в `.ts` файлах. Любое обновление требует деплоя. | Перенести данные в CMS/БД. |
| R7 | **Нет SEO-оптимизации = низкий рейтинг поисковиков** | Высокая | Высокое | Нет sitemap, robots.txt, Schema.org, hreflang. Для университетского сайта SEO критичен (абитуриенты ищут программы). | Реализовать SEO-слой до запуска. |
| R8 | **Изображения с внешних URL** | Высокая | Среднее | Все изображения — с Unsplash. Если Unsplash станет недоступен, сайт потеряет все фото. Нет контроля над CORS, CDN-кешированием. | Загрузить изображения в S3, настроить CDN. |

### Средние риски

| # | Риск | Вероятность | Влияние | Описание | Митигация |
|---|------|------------|---------|----------|-----------|
| R9 | **Техдолг от прототипа** | Высокая | Среднее | Текущий код написан как прототип. Много inline-стилей, захардкоженных строк, отсутствие разделения concerns. Рефакторинг потребуется при масштабировании. | Провести code review, выделить время на рефакторинг. |
| R10 | **Локаль kk vs kz** | Средняя | Среднее | ТЗ требует `/kz/` в URL, код использует `/kk/` (ISO 639-1 для казахского). Потенциальный конфликт со стандартами vs ожиданиями пользователей. | Обсудить с заказчиком и зафиксировать решение. |
| R11 | **Зависимость от Railway** | Средняя | Среднее | ТЗ требует Kubernetes, но текущий деплой на Railway. Миграция потребует значительных усилий. | Планировать миграцию заранее, писать код cloud-agnostic. |

---

## 8. Рекомендуемый порядок действий (Recommended Priority Actions)

### Фаза 0: Фундамент (недели 1-4)

Без этих шагов невозможно начать работу по ТЗ.

| # | Действие | Трудоемкость | Обоснование |
|---|---------|-------------|-------------|
| 1 | **Развернуть PostgreSQL 16** (managed instance или Docker) | M | Блокирует CMS, формы, аутентификацию |
| 2 | **Развернуть и настроить CMS** (Strapi 5 или Payload CMS) | XL | Блокирует FR-001, FR-004, FR-030, FR-031, FR-050-055. Критический путь. |
| 3 | **Настроить CI/CD** (GitHub Actions: lint, build, test) | M | Без CI/CD нет контроля качества. Настроить до начала активной разработки. |
| 4 | **Настроить тестовый фреймворк** (Vitest + Playwright + axe-core) | M | R3 — 0% покрытия неприемлемо. Написать первые тесты для существующих компонентов. |
| 5 | **Развернуть Redis 7** | S | Кеширование CMS-ответов, сессии, rate limiting |
| 6 | **Настроить S3-хранилище** (MinIO / AWS S3 / Cloudflare R2) | M | Убрать зависимость от Unsplash, подготовить для FR-022 |

### Фаза 1: MVP-функционал (недели 5-14)

| # | Действие | Трудоемкость | Обоснование |
|---|---------|-------------|-------------|
| 7 | **Создать CMS-контент-модели** (programs, news, events, pages) | L | Перенести захардкоженные данные из `.ts` в CMS |
| 8 | **Реализовать API-слой** (Next.js API routes + CMS-клиент) | L | Связать фронтенд с CMS |
| 9 | **Рефакторинг главной страницы** (FR-001, FR-002, FR-003, FR-004, FR-005) | L | Hero с видео/слайдером, ролевые ссылки, анимированные счетчики, блок новостей, блок событий |
| 10 | **Каталог программ** (FR-010, FR-011, FR-012, FR-013) | L | Фасетная фильтрация, сортировка, URL-персистентность, детальные страницы |
| 11 | **Многошаговая форма поступления** (FR-020, FR-021, FR-022) | XL | 5 шагов, валидация, загрузка документов, auto-save. Самый сложный UI-компонент. |
| 12 | **Новостная лента** (FR-030, FR-031) | L | Лента с фильтрами, детальные страницы, rich text из CMS |
| 13 | **SEO-оптимизация** (NFR-25, NFR-26, FR-064) | M | Schema.org, hreflang, sitemap.xml, robots.txt, OpenGraph |
| 14 | **Security headers** (NFR-13, NFR-14) | M | CSP, HSTS, X-Frame-Options, security middleware |
| 15 | **CRM-интеграция** (FR-023) | L | Webhook для формы поступления -> Salesforce/HubSpot |
| 16 | **Настроить CDN** (Cloudflare) | M | NFR-01, NFR-04, NFR-15 |
| 17 | **Полная локализация** (FR-060, FR-061) | M | Ревизия всех захардкоженных строк, решение kk vs kz |
| 18 | **Unit + E2E тесты для MVP** | L | Покрыть критические flow (поступление, каталог, навигация) |

### Фаза 2: Расширение (недели 15-26)

| # | Действие | Трудоемкость | Обоснование |
|---|---------|-------------|-------------|
| 19 | **SSO / Аутентификация** (FR-070, FR-073) | XL | SAML 2.0 + OAuth 2.0, 2FA для админов |
| 20 | **Личный кабинет студента** (FR-071, FR-072) | XL | Dashboard, интеграция с LMS |
| 21 | **LMS-интеграция** (Moodle, LTI 1.3) | XL | Расписание, оценки |
| 22 | **Календарь событий** (FR-032) | L | Полный календарь с Google Calendar |
| 23 | **AI-чатбот** (FR-080, FR-081) | XL | 3 языка, эскалация |
| 24 | **Виртуальный тур** (FR-040, FR-041) | XL | 360-панорамы, hotspots |
| 25 | **Мониторинг** (Sentry + Grafana) | L | Error tracking, performance dashboards |
| 26 | **Миграция на Kubernetes** | XL | Горизонтальное масштабирование, 10K users |
| 27 | **Нагрузочное тестирование** (NFR-07) | L | k6/Artillery, оптимизация |
| 28 | **Penetration testing** (NFR-17) | L | OWASP ZAP, исправление уязвимостей |
| 29 | **Visual regression** (Storybook + Chromatic) | L | Предотвращение визуальных регрессий |
| 30 | **Дополнительные интеграции** (Kaspi Pay, Scopus, библиотека) | XL | По мере готовности |

---

## Итоговая оценка

| Метрика | Значение |
|---------|----------|
| **Общая готовность проекта к ТЗ** | **~12-15%** |
| **Готовность фронтенда** | ~20% (каркас есть, функционал нет) |
| **Готовность бэкенда** | ~2% (только health check) |
| **Готовность инфраструктуры** | ~10% (Docker + Railway) |
| **Готовность интеграций** | 0% |
| **Готовность тестирования** | 0% |
| **Готовность безопасности** | ~5% |
| **Оценка MVP (Фаза 1)** | **14-18 недель** при команде 3-4 разработчика |
| **Оценка полного ТЗ (Фаза 1+2)** | **26-34 недели** при команде 3-4 разработчика |
| **Количество новых компонентов** | ~26 |
| **Количество новых API-эндпоинтов** | ~15-20 |
| **Количество новых интеграций** | 10+ |

### Главный вывод

Текущий проект ZhezU — это **визуальный прототип** университетского сайта. Для соответствия техническому заданию требуется построить практически весь бэкенд, всю инфраструктуру, все интеграции и всю тестовую базу с нуля. Фронтенд-каркас (Next.js 16, React 19, Tailwind CSS 4, i18n) является хорошей стартовой точкой, но без серверной части он не имеет практической ценности для конечных пользователей.

**Критический путь:** PostgreSQL -> CMS -> API-слой -> Формы -> CI/CD -> CDN -> SEO -> Запуск MVP.
